{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "additionalProperties": true,
  "definitions": {
    "action": {
      "properties": {
        "browser_style": {
          "default": false,
          "description": "Use this to include a stylesheet in your popup that will make it look consistent with the browser's UI and with other add-ons that use the browser_style property. Although this key defaults to false, it's recommended that you include it and set it to true.",
          "type": "boolean"
        },
        "default_icon": {
          "$ref": "#/definitions/icon"
        },
        "default_popup": {
          "description": "The popup appears when the user clicks the icon.",
          "type": "string"
        },
        "default_title": {
          "description": "Tooltip for the main toolbar icon.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "command": {
      "properties": {
        "description": {
          "type": "string"
        },
        "suggested_key": {
          "properties": {
            "android": {
              "type": "string"
            },
            "chromeos": {
              "type": "string"
            },
            "default": {
              "type": "string"
            },
            "ios": {
              "type": "string"
            },
            "linux": {
              "type": "string"
            },
            "mac": {
              "type": "string"
            },
            "windows": {
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "content_security_policy": {
      "default": "script-src 'self'; object-src 'self'",
      "description": "This introduces some fairly strict policies that will make extensions more secure by default, and provides you with the ability to create and enforce rules governing the types of content that can be loaded and executed by your extensions and applications.",
      "type": "string"
    },
    "glob_pattern": {
      "type": "string"
    },
    "icon": {
      "additionalProperties": false,
      "patternProperties": {
        "^[1-9]\\d*$": {
          "type": "string"
        }
      },
      "type": ["string", "object"]
    },
    "match_pattern": {
      "pattern": "^((\\*|http|https|file|ftp|chrome-extension):\\/\\/(\\*|\\*\\.[^\\/\\*]+|[^\\/\\*]+)?(\\/.*))|<all_urls>$",
      "type": "string"
    },
    "permissions": {
      "items": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "enum": [
              "<all_urls>",
              "activeTab",
              "alarms",
              "bookmarks",
              "browsingData",
              "contextMenus",
              "contextualIdentities",
              "cookies",
              "downloads",
              "downloads.open",
              "geolocation",
              "history",
              "identity",
              "idle",
              "management",
              "nativeMessaging",
              "notifications",
              "proxy",
              "sessions",
              "storage",
              "tabs",
              "topSites",
              "webNavigation",
              "webRequest",
              "webRequestBlocking"
            ]
          }
        ]
      },
      "type": "array",
      "uniqueItems": true
    },
    "scripts": {
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    }
  },
  "properties": {
    "applications": {
      "description": "The applications key contains keys that are specific to a particular host application.",
      "properties": {
        "gecko": {
          "properties": {
            "id": {
              "description": "id is the extension ID",
              "pattern": "^\\{[A-Fa-f0-9]{8}-([A-Fa-f0-9]{4}-){3}[A-Fa-f0-9]{12}\\}$|^[A-Za-z0-9-._]*@[A-Za-z0-9-._]+$",
              "type": "string"
            },
            "strict_max_version": {
              "default": "*",
              "description": "Maximum version of Gecko to support. Defaults to '*'. (Requires Gecko 45)",
              "type": "string"
            },
            "strict_min_version": {
              "default": "42a1",
              "description": "Minimum version of Gecko to support. Defaults to '42a1'. (Requires Gecko 45)",
              "type": "string"
            },
            "update_url": {
              "description": "Link to an add-on update manifest. (Requires Gecko 45)",
              "format": "uri",
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "author": {
      "description": "\"The extension's author, intended for display in the browser's user interface. If the developer key is supplied and it contains the \"name\" property, it will override the author key. There's no way to specify multiple authors.\"",
      "type": "string"
    },
    "background": {
      "description": "The background page is an HTML page that runs in the extension process. It exists for the lifetime of your extension, and only one instance of it at a time is active.",
      "properties": {
        "page": {
          "description": "Specify the HTML of the background page.",
          "type": "string"
        },
        "persistent": {
          "default": true,
          "description": "When false, makes the background page an event page (loaded only when needed).",
          "type": "boolean"
        },
        "scripts": {
          "description": "A background page will be generated by the extension system that includes each of the files listed in the scripts property.",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "browser_action": {
      "allOf": [
        {
          "$ref": "#/properties/page_action"
        }
      ],
      "description": "browser action is a button that your extension adds to the browser's toolbar. The button has an icon, and may optionally have a popup whose content is specified using HTML, CSS, and JavaScript.",
      "properties": {
        "default_area": {
          "default": "navbar",
          "description": "Defines the part of the browser in which the button is initially placed.",
          "enum": ["navbar", "menupanel", "tabstrip", "personaltoolbar"]
        }
      }
    },
    "chrome_settings_overrides": {
      "description": "Use the chrome_settings_overrides key to override certain browser settings",
      "properties": {
        "homepage": {
          "description": "Defines the page to be used as the browser's homepage.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "chrome_url_overrides": {
      "description": "Use the chrome_url_overrides key to provide a custom replacement for the documents loaded into various special pages usually provided by the browser itself.",
      "properties": {
        "bookmarks": {
          "description": "Provide a replacement for the page that shows the bookmarks.",
          "type": "string"
        },
        "history": {
          "description": "Provide a replacement for the page that shows the browsing history.",
          "type": "string"
        },
        "newtab": {
          "description": "Provide a replacement for the document that's shown in the \"new tab\" page",
          "type": "string"
        }
      },
      "type": "object"
    },
    "commands": {
      "additionalProperties": {
        "$ref": "#/definitions/command"
      },
      "description": "Use the commands API to add keyboard shortcuts that trigger actions in your extension, for example, an action to open the browser action or send a command to the extension.",
      "properties": {
        "_execute_browser_action": {
          "$ref": "#/definitions/command"
        },
        "_execute_page_action": {
          "$ref": "#/definitions/command"
        },
        "_execute_sidebar_action": {
          "$ref": "#/definitions/command"
        }
      },
      "type": "object"
    },
    "content_scripts": {
      "description": "Content scripts are JavaScript files that run in the context of web pages.",
      "items": {
        "additionalProperties": false,
        "properties": {
          "all_frames": {
            "default": false,
            "description": "Controls whether the content script runs in all frames of the matching page, or only the top frame.",
            "type": "boolean"
          },
          "css": {
            "description": "The list of CSS files to be injected into matching pages. These are injected in the order they appear in this array, before any DOM is constructed or displayed for the page.",
            "items": {
              "type": "string"
            },
            "type": "array",
            "uniqueItems": true
          },
          "exclude_globs": {
            "description": "Applied after matches to exclude URLs that match this glob. Intended to emulate the @exclude Greasemonkey keyword.",
            "items": {
              "$ref": "#/definitions/glob_pattern"
            },
            "type": "array",
            "uniqueItems": true
          },
          "exclude_matches": {
            "description": "Excludes pages that this content script would otherwise be injected into.",
            "items": {
              "$ref": "#/definitions/match_pattern"
            },
            "type": "array",
            "uniqueItems": true
          },
          "include_globs": {
            "description": "Applied after matches to include only those URLs that also match this glob. Intended to emulate the @include Greasemonkey keyword.",
            "items": {
              "$ref": "#/definitions/glob_pattern"
            },
            "type": "array",
            "uniqueItems": true
          },
          "js": {
            "$ref": "#/definitions/scripts",
            "description": "The list of JavaScript files to be injected into matching pages. These are injected in the order they appear in this array."
          },
          "match_about_blank": {
            "default": false,
            "description": "Whether to insert the content script on about:blank and about:srcdoc.",
            "type": "boolean"
          },
          "matches": {
            "description": "Specifies which pages this content script will be injected into.",
            "items": {
              "$ref": "#/definitions/match_pattern"
            },
            "minItems": 1,
            "type": "array",
            "uniqueItems": true
          },
          "run_at": {
            "default": "document_idle",
            "description": "Controls when the files in js are injected.",
            "enum": ["document_start", "document_end", "document_idle"],
            "type": "string"
          }
        },
        "required": ["matches"],
        "type": "object"
      },
      "minItems": 1,
      "type": "array",
      "uniqueItems": true
    },
    "content_security_policy": {
      "$ref": "#/definitions/content_security_policy"
    },
    "default_locale": {
      "default": "en",
      "description": "Specifies the subdirectory of _locales that contains the default strings for this extension.",
      "type": "string"
    },
    "description": {
      "description": "A plain text description of the extension",
      "type": "string"
    },
    "developer": {
      "description": "The name of the extension's developer and their homepage URL, intended for display in the browser's user interface.",
      "properties": {
        "name": {
          "type": "string"
        },
        "url": {
          "format": "uri",
          "type": "string"
        }
      },
      "type": "object"
    },
    "devtools_page": {
      "description": "A DevTools extension adds functionality to the Chrome DevTools. It can add new UI panels and sidebars, interact with the inspected page, get information about network requests, and more.",
      "type": "string"
    },
    "homepage_url": {
      "description": "The URL of the homepage for this add-on. The add-on management page will contain a link to this URL.",
      "format": "uri",
      "type": "string"
    },
    "icons": {
      "additionalProperties": false,
      "description": "One or more icons that represent the extension, app, or theme. Recommended format: PNG; also BMP, GIF, ICO, JPEG.",
      "patternProperties": {
        "^[1-9]\\d*$": {
          "type": "string"
        }
      }
    },
    "incognito": {
      "default": "spanning",
      "description": "Specify how this extension will behave if allowed to run in incognito mode.",
      "enum": ["spanning", "split", "not_allowed"],
      "type": "string"
    },
    "manifest_version": {
      "description": "One integer specifying the version of the manifest file format your package requires.",
      "enum": [2],
      "type": "integer"
    },
    "name": {
      "description": "The name of the extension",
      "maxLength": 45,
      "minLength": 2,
      "type": "string"
    },
    "omnibox": {
      "description": "The omnibox API allows you to register a keyword with Google Chrome's address bar, which is also known as the omnibox.",
      "properties": {
        "keyword": {
          "description": "The keyword that will trigger your extension.",
          "type": "string"
        }
      },
      "required": ["keyword"],
      "type": "object"
    },
    "optional_permissions": {
      "description": "Use the optional_permissions key to list permissions which you want to ask for at runtime, after your add-on has been installed.",
      "items": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "enum": [
              "activeTab",
              "background",
              "bookmarks",
              "clipboardRead",
              "clipboardWrite",
              "contentSettings",
              "contextMenus",
              "cookies",
              "debugger",
              "geolocation",
              "history",
              "idle",
              "management",
              "notifications",
              "pageCapture",
              "tabs",
              "topSites",
              "webNavigation",
              "webRequest",
              "webRequestBlocking"
            ]
          }
        ]
      },
      "type": "array",
      "uniqueItems": true
    },
    "options_ui": {
      "description": "Use the options_ui key to define an options page for your add-on.",
      "properties": {
        "browser_style": {
          "default": true,
          "description": "Use this to include a stylesheet in your page that will make it look consistent with the browser's UI and with other add-ons that use the browser_style property.",
          "type": "boolean"
        },
        "open_in_tab": {
          "default": false,
          "description": "If true, the options page will open in a normal browser tab, rather than being integrated into the browser's add-ons manager.",
          "type": "boolean"
        },
        "page": {
          "description": "The path to an HTML file containing the specification of your options page.",
          "type": "string"
        }
      },
      "required": ["page"],
      "type": "object"
    },
    "page_action": {
      "description": "Use the chrome.pageAction API to put icons inside the address bar. Page actions represent actions that can be taken on the current page, but that aren't applicable to all pages.",
      "properties": {
        "browser_style": {
          "default": false,
          "description": "Use this to include a stylesheet in your popup that will make it look consistent with the browser's UI and with other add-ons that use the browser_style property. Although this key defaults to false, it's recommended that you include it and set it to true.",
          "type": "boolean"
        },
        "default_icon": {
          "$ref": "#/definitions/icon"
        },
        "default_popup": {
          "description": "The popup appears when the user clicks the icon.",
          "type": "string"
        },
        "default_title": {
          "description": "Tooltip for the main toolbar icon.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "permissions": {
      "$ref": "#/definitions/permissions",
      "description": "Permissions help to limit damage if your extension or app is compromised by malware. Some permissions are also displayed to users before installation, as detailed in Permission Warnings."
    },
    "protocol_handlers": {
      "description": "Use this key to register one of more web-based protocol handlers.",
      "items": {
        "description": "Use this object to register a single web-based protocol handler",
        "properties": {
          "name": {
            "description": "A string representing the name of the protocol handler. This will be displayed to the user when they are being asked if they want this handler to open the link.",
            "type": "string"
          },
          "protocol": {
            "anyOf": [
              {
                "description": "A pre-existing protocol allowed for use with WebExtensions. See https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers for more information.",
                "enum": [
                  "bitcoin",
                  "geo",
                  "im",
                  "irc",
                  "ircs",
                  "magnet",
                  "mailto",
                  "mms",
                  "news",
                  "nntp",
                  "sip",
                  "sms",
                  "smsto",
                  "ssh",
                  "tel",
                  "urn",
                  "webcal",
                  "wtai",
                  "xmpp"
                ]
              },
              {
                "description": "A custom-named protocol. These MUST be prefixed with 'web+' or 'ext+', followed by a string consisting of only lower-case ASCII characters.",
                "pattern": "^(ext|web)\\+[0-9a-z]+",
                "type": "string"
              }
            ],
            "description": "A string defining the protocol."
          },
          "uriTemplate": {
            "description": "A string representing the URL of the handler. This string must include \"%s\" as a placeholder: this will be replaced with the escaped URL of the document to be handled. This URL might be a true URL, or it could be a phone number, email address, or so forth.",
            "pattern": "%s"
          }
        },
        "type": "object"
      },
      "type": "array"
    },
    "short_name": {
      "description": "The short name is typically used where there is insufficient space to display the full name.",
      "maxLength": 12,
      "minLength": 2,
      "type": "string"
    },
    "sidebar_action": {
      "description": "A sidebar is a pane that is displayed at the left-hand side of the browser window, next to the web page. The browser provides a UI that enables the user to see the currently available sidebars and to select a sidebar to display.",
      "properties": {
        "default_icon": {
          "$ref": "#/definitions/icon"
        },
        "default_panel": {
          "description": "The path to an HTML file that specifies the sidebar's contents.",
          "type": "string"
        },
        "default_title": {
          "description": "Title for the sidebar. This is used in the browser UI for listing and opening sidebars, and is displayed at the top of the sidebar when it is open.",
          "type": "string"
        }
      },
      "type": "object"
    },
    "version": {
      "description": "One to four dot-separated integers identifying the version of this extension.",
      "pattern": "^(?:\\d{1,5}\\.){0,3}\\d{1,5}$"
    },
    "web_accessible_resources": {
      "description": "An array of strings specifying the paths (relative to the package root) of packaged resources that are expected to be usable in the context of a web page.",
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    }
  },
  "required": ["manifest_version", "name", "version"],
  "title": "JSON schema for WebExtensions manifest files",
  "type": "object"
}
