{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AutoRect Schema",
  "description": "A JSON Schema for the 2D autorect structure that represents a recursive polygon layout for UI components.",
  "type": "object",
  "properties": {
    "objects": {
      "type": "array",
      "description": "An array of objects defining the UI layout. Each object can contain nested child objects.",
      "items": { "$ref": "#/definitions/autorectObject" }
    },
    "states": {
      "type": "object",
      "description": "The current state properties including coordinates and percentage positions.",
      "properties": {
        "x": { "type": "number", "description": "X coordinate." },
        "y": { "type": "number", "description": "Y coordinate." },
        "pct_x": {
          "type": "number",
          "description": "Percentage value for the x coordinate."
        },
        "pct_y": {
          "type": "number",
          "description": "Percentage value for the y coordinate."
        }
      },
      "required": ["x", "y", "pct_x", "pct_y"]
    },
    "history": {
      "type": "array",
      "description": "An array storing historical states or actions."
    },
    "selection": {
      "type": "string",
      "description": "The current selection mode (e.g., 'horizontal')."
    },
    "sel_id": {
      "type": "string",
      "description": "ID of the selected element."
    },
    "sel_node_id": {
      "type": "string",
      "description": "Node ID of the selected element."
    },
    "sel_class": {
      "type": "string",
      "description": "Class name of the selected element."
    },
    "sel_slot": {
      "type": "string",
      "description": "Slot information for the selected element."
    },
    "sel_attr": {
      "type": "string",
      "description": "Attribute used for selection."
    },
    "sel_parent": {
      "type": "array",
      "description": "An array representing parent elements of the current selection."
    },
    "indicate": {
      "type": "string",
      "description": "Indicator for additional UI state or message."
    },
    "toggle_template": {
      "type": "boolean",
      "description": "A flag indicating whether to toggle the template mode."
    },
    "custom_css": {
      "type": "string",
      "description": "Custom CSS styles included as a string."
    }
  },
  "required": [
    "objects",
    "states",
    "history",
    "selection",
    "sel_id",
    "sel_node_id",
    "sel_class",
    "sel_slot",
    "sel_attr",
    "sel_parent",
    "indicate",
    "toggle_template",
    "custom_css"
  ],
  "definitions": {
    "autorectObject": {
      "type": "object",
      "description": "An individual object in the autorect structure.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Optional unique identifier for the object."
        },
        "class": {
          "type": "array",
          "description": "An array of class names for styling and behavior.",
          "items": { "type": "string" }
        },
        "selected": {
          "type": "boolean",
          "description": "Indicates if the object is selected."
        },
        "childs": {
          "type": "array",
          "description": "Nested child objects with the same structure.",
          "items": { "$ref": "#/definitions/autorectObject" }
        },
        "selection": {
          "type": "string",
          "description": "Selection mode for this object (e.g., 'inside', 'vertical', etc.)."
        }
      },
      "required": ["class", "selected", "childs", "selection"]
    }
  }
}
