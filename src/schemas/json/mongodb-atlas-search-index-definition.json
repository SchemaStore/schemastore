{
  "$comment": "https://www.mongodb.com/docs/atlas/atlas-search/index-definitions/#std-label-ref-index-definitions",
  "$id": "https://json.schemastore.org/mongodb-atlas-search-index-definition.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "definitions": {
    "CharFilter": {
      "additionalProperties": false,
      "dependencies": {
        "ignoredTags": {
          "properties": {
            "type": {
              "enum": ["htmlStrip"]
            }
          }
        }
      },
      "if": {
        "properties": {
          "type": {
            "const": "mapping"
          }
        }
      },
      "properties": {
        "ignoredTags": {
          "description": "List that contains the HTML tags to exclude from filtering.",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "type": {
          "description": "Human-readable label that identifies this character filter type.",
          "enum": ["htmlStrip", "icuNormalize", "mapping", "persian"],
          "type": "string"
        }
      },
      "required": ["type"],
      "then": {
        "properties": {
          "mappings": {
            "type": "object"
          }
        },
        "required": ["mappings"]
      },
      "title": "CharFilter",
      "type": "object"
    },
    "CustomAnalyzer": {
      "additionalProperties": false,
      "properties": {
        "charFilters": {
          "description": "Array containing zero or more character filters.",
          "items": {
            "$ref": "#/definitions/CharFilter"
          },
          "type": "array"
        },
        "name": {
          "description": "Name of the custom analyzer.\nNames must be unique within an index, and may not start with any of the following strings:\n- lucene.\n- builtin.\n- mongodb.",
          "pattern": "^(?!^lucene\\.|builtin\\.|mongodb\\.).*",
          "type": "string"
        },
        "tokenFilters": {
          "description": "Array containing zero or more token filters.",
          "items": {
            "$ref": "#/definitions/TokenFilter"
          },
          "type": "array"
        },
        "tokenizer": {
          "$ref": "#/definitions/Tokenizer"
        }
      },
      "required": ["name", "tokenizer"],
      "title": "Analyzer",
      "type": "object"
    },
    "Mappings": {
      "description": "Specifies how to index fields at different paths for this index.",
      "oneOf": [
        {
          "additionalProperties": false,
          "properties": {
            "dynamic": {
              "const": true
            }
          }
        },
        {
          "additionalProperties": false,
          "properties": {
            "dynamic": {
              "description": "Enables or disables dynamic mapping of fields for this index.\nIf set to true, Atlas Search recursively indexes all fields and embedded documents in the document except:\nFields of certain data types. To learn more, see BSON Data Types.\nAny fields explicitly excluded by the mappings.fields parameter.\nIf set to false, you must specify individual fields to index using mappings.fields.\nIf omitted, defaults to false.",
              "type": "boolean"
            },
            "fields": {
              "patternProperties": {
                "^.*$": {
                  "oneOf": [
                    {
                      "$ref": "#/definitions/MappingsField"
                    },
                    {
                      "items": {
                        "$ref": "#/definitions/MappingsField"
                      },
                      "type": "array"
                    }
                  ]
                }
              },
              "type": "object"
            }
          },
          "required": ["fields"]
        }
      ],
      "title": "Mappings",
      "type": "object"
    },
    "MappingsField": {
      "additionalProperties": false,
      "dependencies": {
        "analyzer": {
          "properties": {
            "type": {
              "enum": ["autocomplete", "string"]
            }
          }
        },
        "dynamic": {
          "properties": {
            "type": {
              "enum": ["document", "embeddedDocuments"]
            }
          }
        },
        "fields": {
          "properties": {
            "type": {
              "enum": ["document", "embeddedDocuments"]
            }
          }
        },
        "foldDiacritics": {
          "properties": {
            "type": {
              "enum": ["autocomplete"]
            }
          }
        },
        "ignoreAbove": {
          "properties": {
            "type": {
              "enum": ["string"]
            }
          }
        },
        "indexDoubles": {
          "properties": {
            "type": {
              "enum": ["number", "numberFacet"]
            }
          }
        },
        "indexIntegers": {
          "properties": {
            "type": {
              "enum": ["number", "numberFacet"]
            }
          }
        },
        "indexOptions": {
          "properties": {
            "type": {
              "enum": ["string"]
            }
          }
        },
        "indexShapes": {
          "properties": {
            "type": {
              "enum": ["geo"]
            }
          }
        },
        "maxGrams": {
          "properties": {
            "type": {
              "enum": ["autocomplete"]
            }
          }
        },
        "minGrams": {
          "properties": {
            "type": {
              "enum": ["autocomplete"]
            }
          }
        },
        "multi": {
          "properties": {
            "type": {
              "enum": ["string"]
            }
          }
        },
        "norms": {
          "properties": {
            "type": {
              "enum": ["string"]
            }
          }
        },
        "representation": {
          "properties": {
            "type": {
              "enum": ["number", "numberFacet"]
            }
          }
        },
        "searchAnalyzer": {
          "properties": {
            "type": {
              "enum": ["string"]
            }
          }
        },
        "store": {
          "properties": {
            "type": {
              "enum": ["string"]
            }
          }
        },
        "tokenization": {
          "properties": {
            "type": {
              "enum": ["autocomplete"]
            }
          }
        }
      },
      "properties": {
        "analyzer": {
          "type": "string"
        },
        "dynamic": {
          "type": "boolean"
        },
        "fields": {
          "type": "object"
        },
        "foldDiacritics": {
          "type": "boolean"
        },
        "ignoreAbove": {
          "type": "integer"
        },
        "indexDoubles": {
          "type": "boolean"
        },
        "indexIntegers": {
          "type": "boolean"
        },
        "indexOptions": {
          "enum": ["docs", "freqs", "positions", "offsets"],
          "type": "string"
        },
        "indexShapes": {
          "type": "boolean"
        },
        "maxGrams": {
          "type": "integer"
        },
        "minGrams": {
          "type": "integer"
        },
        "multi": {
          "properties": {
            "analyzer": {
              "type": "string"
            },
            "type": {
              "enum": ["string"],
              "type": "string"
            }
          },
          "type": "object"
        },
        "norms": {
          "enum": ["include", "omit"],
          "type": "string"
        },
        "representation": {
          "enum": ["int64", "double"],
          "type": "string"
        },
        "searchAnalyzer": {
          "type": "string"
        },
        "store": {
          "type": "boolean"
        },
        "tokenization": {
          "enum": ["edgeGram", "rightEdgeGram", "nGram"],
          "type": "string"
        },
        "type": {
          "enum": [
            "autocomplete",
            "boolean",
            "date",
            "dateFacet",
            "document",
            "embeddedDocuments",
            "geo",
            "number",
            "numberFacet",
            "objectId",
            "string",
            "stringFacet"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "StoredSource": {
      "anyOf": [
        {
          "additionalProperties": false,
          "properties": {
            "exclude": {
              "description": "List that contains the field names or dot-separated paths to fields to exclude from being stored.\nIf specified, Atlas Search stores original documents except the fields listed here.",
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "include": {
              "description": "List that contains the field names or dot-separated paths to fields to store.\nIn addition to the specified fields, Atlas Search stores _id also by default.",
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": ["include"]
        },
        {
          "additionalProperties": false,
          "properties": {
            "exclude": {
              "description": "List that contains the field names or dot-separated paths to fields to exclude from being stored.\nIf specified, Atlas Search stores original documents except the fields listed here.",
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "include": {
              "description": "List that contains the field names or dot-separated paths to fields to store.\nIn addition to the specified fields, Atlas Search stores _id also by default.",
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": ["exclude"]
        }
      ],
      "title": "StoredSource",
      "type": "object"
    },
    "Synonym": {
      "additionalProperties": false,
      "properties": {
        "analyzer": {
          "enum": [
            "lucene.standard",
            "lucene.simple",
            "lucene.whitespace",
            "lucene.keyword",
            "lucene.arabic",
            "lucene.armenian",
            "lucene.basque",
            "lucene.bengali",
            "lucene.brazilian",
            "lucene.bulgarian",
            "lucene.catalan",
            "lucene.chinese",
            "lucene.cjk",
            "lucene.czech",
            "lucene.danish",
            "lucene.dutch",
            "lucene.english",
            "lucene.finnish",
            "lucene.french",
            "lucene.galician",
            "lucene.german",
            "lucene.greek",
            "lucene.hindi",
            "lucene.hungarian",
            "lucene.indonesian",
            "lucene.irish",
            "lucene.italian",
            "lucene.japanese",
            "lucene.korean",
            "lucene.latvian",
            "lucene.lithuanian",
            "lucene.morfologik",
            "lucene.nori",
            "lucene.norwegian",
            "lucene.persian",
            "lucene.portuguese",
            "lucene.romanian",
            "lucene.russian",
            "lucene.smartcn",
            "lucene.sorani",
            "lucene.spanish",
            "lucene.swedish",
            "lucene.thai",
            "lucene.turkish",
            "lucene.ukrainian",
            "nGram",
            "edgeGram",
            "daitchMokotoffSoundex",
            "shingle"
          ],
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "source": {
          "properties": {
            "collection": {
              "type": "string"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "TokenFilter": {
      "additionalProperties": false,
      "properties": {
        "type": {
          "description": "Human-readable label that identifies this token filter type.",
          "enum": [
            "asciiFolding",
            "daitchMokotoffSoundex",
            "edgeGram",
            "icuFolding",
            "icuNormalizer",
            "length",
            "lowercase",
            "nGram",
            "regex",
            "reverse",
            "shingle",
            "snowballStemming",
            "stopword",
            "trim"
          ],
          "type": "string"
        }
      },
      "required": ["type"],
      "title": "TokenFilter",
      "type": "object"
    },
    "Tokenizer": {
      "additionalProperties": false,
      "description": "Tokenizer to use to create tokens.",
      "properties": {
        "type": {
          "enum": [
            "edgeGram",
            "keyword",
            "nGram",
            "regexCaptureGroup",
            "regexSplit",
            "standard",
            "uaxUrlEmail",
            "whitespace"
          ],
          "type": "string"
        }
      },
      "required": ["type"],
      "title": "Tokenizer",
      "type": "object"
    }
  },
  "properties": {
    "analyzer": {
      "description": "Specifies the analyzer to apply to string fields when indexing.\nIf you set this only at the top and do not specify an analyzer for the fields in the index definition, Atlas Search applies this analyzer to all the fields.\nTo use a different analyzer for each field, you must specify a different analyzer for the field.\nIf omitted, defaults to Standard Analyzer.",
      "type": "string"
    },
    "analyzers": {
      "description": "Specifies the Custom Analyzers to use in this index.",
      "items": {
        "$ref": "#/definitions/CustomAnalyzer"
      },
      "type": "array"
    },
    "mappings": {
      "$ref": "#/definitions/Mappings"
    },
    "name": {
      "description": "Specifies a name for the index. In each namespace, names of all indexes in the namespace must be unique.\nIf omitted, defaults to default.",
      "type": "string"
    },
    "searchAnalyzer": {
      "description": "Specifies the analyzer to apply to query text before searching with it.\nIf omitted, defaults to Standard Analyzer.",
      "type": "string"
    },
    "storedSource": {
      "description": "Specifies fields in the documents to store for query-time look-ups using the returnedStoredSource option.\nYou can store fields of all BSON Data Types on Atlas Search.\n\nValue can be one of the following:\ntrue, to store all fields\nfalse, to not store any fields\nObject that specifies the fields to include or exclude from storage\n\nIf omitted, defaults to false.",
      "oneOf": [
        {
          "type": "boolean"
        },
        {
          "$ref": "#/definitions/StoredSource"
        }
      ]
    },
    "synonyms": {
      "description": "Synonym mappings to use in your index.",
      "items": {
        "$ref": "#/definitions/Synonym"
      },
      "type": "array"
    }
  },
  "required": ["mappings"],
  "title": "JSON schema for MongoDB Atlas Search index definition",
  "type": "object"
}
