{
  "$schema": "http://json-schema.org/draft-04/schema",
  "additionalProperties": false,
  "default": {
    "navigationFallback": {
      "rewrite": "/index.html"
    }
  },
  "definitions": {
    "auth": {
      "additionalProperties": false,
      "properties": {
        "identityProviders": {
          "additionalProperties": false,
          "properties": {
            "apple": {
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "default": true,
                  "description": "<false> if the apple provider is not enabled, <true> otherwise",
                  "type": "boolean"
                },
                "login": {
                  "additionalProperties": false,
                  "description": "",
                  "properties": {
                    "scopes": {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "registration": {
                  "additionalProperties": false,
                  "properties": {
                    "clientIdSettingName": {
                      "description": "The name of the application setting containing the Client ID",
                      "type": "string"
                    },
                    "clientSecretSettingName": {
                      "description": "The name of the application setting containing the Client Secret",
                      "type": "string"
                    }
                  },
                  "required": ["clientSecretSettingName"],
                  "type": "object"
                },
                "userDetailsClaim": {
                  "description": "The name of the claim from which we should read user details",
                  "type": "string"
                }
              },
              "required": ["registration"],
              "type": "object"
            },
            "azureActiveDirectory": {
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "default": true,
                  "description": "<false> if the azureActiveDirectory provider is not enabled, <true> otherwise",
                  "type": "boolean"
                },
                "login": {
                  "additionalProperties": false,
                  "description": "",
                  "properties": {
                    "loginParameters": {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "registration": {
                  "additionalProperties": false,
                  "properties": {
                    "clientIdSettingName": {
                      "description": "The name of the application setting containing the Application (client) ID for the Azure AD app registration",
                      "type": "string"
                    },
                    "clientSecretSettingName": {
                      "description": "The name of the application setting containing the client secret for the Azure AD app registration",
                      "type": "string"
                    },
                    "openIdIssuer": {
                      "description": "The endpoint for the OpenID configuration of the AAD tenant",
                      "type": "string"
                    }
                  },
                  "required": ["openIdIssuer", "clientSecretSettingName"],
                  "type": "object"
                },
                "userDetailsClaim": {
                  "description": "The name of the claim from which we should read user details",
                  "type": "string"
                }
              },
              "required": ["registration"],
              "type": "object"
            },
            "customOpenIdConnectProviders": {
              "patternProperties": {
                ".*": {
                  "additionalProperties": false,
                  "properties": {
                    "enabled": {
                      "default": true,
                      "description": "<false> if the custom OpenID Connect provider is not enabled, <true> otherwise",
                      "type": "boolean"
                    },
                    "login": {
                      "additionalProperties": false,
                      "description": "",
                      "properties": {
                        "loginParameterNames": {
                          "items": {
                            "type": "string"
                          },
                          "type": "array"
                        },
                        "nameClaimType": {
                          "type": "string"
                        },
                        "scopes": {
                          "items": {
                            "type": "string"
                          },
                          "type": "array"
                        }
                      },
                      "type": "object"
                    },
                    "registration": {
                      "additionalProperties": false,
                      "properties": {
                        "clientCredential": {
                          "properties": {
                            "clientSecretSettingName": {
                              "description": "The name of the application setting containing the Client Secret",
                              "type": "string"
                            }
                          },
                          "required": ["clientSecretSettingName"],
                          "type": "object"
                        },
                        "clientIdSettingName": {
                          "description": "The name of the application setting containing the Client ID",
                          "type": "string"
                        },
                        "openIdConnectConfiguration": {
                          "properties": {
                            "authorizationEndpoint": {
                              "description": "The path to the authorization endpoint",
                              "type": "string"
                            },
                            "certificationUri": {
                              "description": "The path to the jwks uri",
                              "type": "string"
                            },
                            "issuer": {
                              "description": "The path to the issuer endpoint",
                              "type": "string"
                            },
                            "tokenEndpoint": {
                              "description": "The path to the token endpoint",
                              "type": "string"
                            },
                            "wellKnownOpenIdConfiguration": {
                              "description": "The path to the well known configuration endpoint",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "required": [
                        "clientCredential",
                        "openIdConnectConfiguration"
                      ],
                      "type": "object"
                    }
                  },
                  "required": ["registration", "login"]
                }
              },
              "type": "object"
            },
            "facebook": {
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "default": true,
                  "description": "<false> if the facebook provider is not enabled, <true> otherwise",
                  "type": "boolean"
                },
                "login": {
                  "additionalProperties": false,
                  "description": "",
                  "properties": {
                    "scopes": {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "registration": {
                  "additionalProperties": false,
                  "properties": {
                    "appIdSettingName": {
                      "description": "The name of the application setting containing the App ID",
                      "type": "string"
                    },
                    "appSecretSettingName": {
                      "description": "The name of the application setting containing the App Secret",
                      "type": "string"
                    }
                  },
                  "required": ["appSecretSettingName"],
                  "type": "object"
                },
                "userDetailsClaim": {
                  "description": "The name of the claim from which we should read user details",
                  "type": "string"
                }
              },
              "required": ["registration"],
              "type": "object"
            },
            "github": {
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "default": true,
                  "description": "<false> if the gitHub provider is not enabled, <true> otherwise",
                  "type": "boolean"
                },
                "login": {
                  "additionalProperties": false,
                  "description": "",
                  "properties": {
                    "scopes": {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "registration": {
                  "additionalProperties": false,
                  "properties": {
                    "clientIdSettingName": {
                      "description": "The name of the application setting containing the Client ID",
                      "type": "string"
                    },
                    "clientSecretSettingName": {
                      "description": "The name of the application setting containing the Client Secret",
                      "type": "string"
                    }
                  },
                  "required": ["clientSecretSettingName"],
                  "type": "object"
                },
                "userDetailsClaim": {
                  "description": "The name of the claim from which we should read user details",
                  "type": "string"
                }
              },
              "required": ["registration"],
              "type": "object"
            },
            "google": {
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "default": true,
                  "description": "<false> if the google provider is not enabled, <true> otherwise",
                  "type": "boolean"
                },
                "login": {
                  "additionalProperties": false,
                  "description": "",
                  "properties": {
                    "scopes": {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "registration": {
                  "additionalProperties": false,
                  "properties": {
                    "clientIdSettingName": {
                      "description": "The name of the application setting containing the Client ID",
                      "type": "string"
                    },
                    "clientSecretSettingName": {
                      "description": "The name of the application setting containing the Client Secret",
                      "type": "string"
                    }
                  },
                  "required": ["clientSecretSettingName"],
                  "type": "object"
                },
                "userDetailsClaim": {
                  "description": "The name of the claim from which we should read user details",
                  "type": "string"
                }
              },
              "required": ["registration"],
              "type": "object"
            },
            "twitter": {
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "default": true,
                  "description": "<false> if the twitter provider is not enabled, <true> otherwise",
                  "type": "boolean"
                },
                "registration": {
                  "additionalProperties": false,
                  "properties": {
                    "consumerKeySettingName": {
                      "description": "The name of the application setting containing the Consumer Key",
                      "type": "string"
                    },
                    "consumerSecretSettingName": {
                      "description": "The name of the application setting containing the Consumer Secret",
                      "type": "string"
                    }
                  },
                  "required": ["consumerSecretSettingName"],
                  "type": "object"
                },
                "userDetailsClaim": {
                  "description": "The name of the claim from which we should read user details",
                  "type": "string"
                }
              },
              "required": ["registration"],
              "type": "object"
            }
          },
          "type": "object"
        },
        "rolesSource": {
          "description": "Route to API function for assigning roles. For example, \"/api/GetRoles\". See https://aka.ms/swa-roles-function",
          "type": "string"
        }
      },
      "required": ["identityProviders"],
      "type": "object"
    },
    "route": {
      "additionalProperties": false,
      "properties": {
        "allowedRoles": {
          "description": "Roles that are allowed to access this route. If not empty, only role(s) listed are authorized to access the route. Roles are only used for authorization; they are not used to evaluate whether the route matches the request.",
          "items": {
            "anyOf": [
              {
                "examples": ["anonymous", "authenticated"],
                "type": "string"
              }
            ]
          },
          "type": "array"
        },
        "headers": {
          "additionalProperties": true,
          "description": "Override any matching global headers",
          "type": "object"
        },
        "methods": {
          "description": "Request method(s) to match",
          "items": {
            "anyOf": [
              {
                "enum": [
                  "GET",
                  "HEAD",
                  "POST",
                  "PUT",
                  "DELETE",
                  "PATCH",
                  "CONNECT",
                  "OPTIONS",
                  "TRACE"
                ],
                "type": "string"
              }
            ]
          },
          "type": "array"
        },
        "redirect": {
          "description": "Redirect to a relative or absolute path, or an external URI. Default status code is 302, override with 301.",
          "type": "string"
        },
        "rewrite": {
          "description": "A path to rewrite the request route to",
          "type": "string"
        },
        "route": {
          "description": "Request route pattern to match. May contain valid wildcards. See documentation: https://aka.ms/swa/config-schema",
          "type": "string"
        },
        "statusCode": {
          "description": "Status code override",
          "type": "integer"
        }
      },
      "required": ["route"],
      "type": "object"
    }
  },
  "description": "Documentation: https://aka.ms/swa/config-schema",
  "properties": {
    "$schema": {
      "default": "https://json.schemastore.org/staticwebapp.config.json",
      "description": "JSON schema",
      "type": "string"
    },
    "auth": {
      "$ref": "#/definitions/auth"
    },
    "forwardingGateway": {
      "additionalProperties": false,
      "description": "Forwarding gateway configuration",
      "properties": {
        "allowedForwardedHosts": {
          "description": "The value of `X-Forwarded-Host` to allow to be used when generating redirect URLs",
          "examples": [
            ["example.org", "www.example.org", "staging.example.org"]
          ],
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "requiredHeaders": {
          "additionalProperties": true,
          "description": "HTTP header name/value pairs that are required for access",
          "examples": [
            {
              "X-Azure-FDID": "10dd26ef"
            }
          ],
          "type": "object"
        }
      },
      "type": "object"
    },
    "globalHeaders": {
      "additionalProperties": true,
      "description": "Default headers to set on all responses",
      "type": "object"
    },
    "mimeTypes": {
      "additionalProperties": false,
      "default": {},
      "description": "Custom mime types configuration",
      "examples": [
        {
          ".config": "application/xml"
        }
      ],
      "patternProperties": {
        "^\\..+$": {
          "type": "string"
        }
      },
      "type": "object"
    },
    "navigationFallback": {
      "additionalProperties": false,
      "default": {
        "rewrite": "/index.html"
      },
      "description": "A default file to return if the request does not match a resource",
      "properties": {
        "exclude": {
          "description": "Paths to exclude from the fallback route. May use valid wildcards. https://aka.ms/swa/config-schema",
          "examples": [["*.{jpg,gif,png}", "assets/*"]],
          "type": "array"
        },
        "rewrite": {
          "default": "/index.html",
          "description": "The default file to return if the request does not match a resource",
          "type": "string"
        }
      },
      "required": ["rewrite"],
      "type": "object"
    },
    "networking": {
      "additionalProperties": false,
      "description": "Networking configuration",
      "properties": {
        "allowedIpRanges": {
          "description": "Restrict access to one or more IPv4 ranges. Supports CIDR notation (e.g., \"192.168.100.14/24\")",
          "examples": [["10.0.0.0/24", "192.1.1.1/10"]],
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "platform": {
      "additionalProperties": false,
      "description": "Platform configuration",
      "properties": {
        "apiRuntime": {
          "description": "Language runtime for the managed functions API",
          "enum": [
            "dotnet:3.1",
            "dotnet:6.0",
            "dotnet-isolated:6.0",
            "node:12",
            "node:14",
            "node:16",
            "python:3.8",
            "python:3.9"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "responseOverrides": {
      "description": "Custom error pages or redirects",
      "examples": [
        {
          "404": {
            "rewrite": "/custom_404.html",
            "statusCode": 200
          }
        }
      ],
      "patternProperties": {
        ".*": {
          "oneOf": [
            {
              "properties": {
                "redirect": {
                  "description": "Redirect to a relative or absolute path, or an external URI. Default status code is 302, override with 301.",
                  "type": "string"
                },
                "rewrite": {
                  "description": "A path to rewrite the request route to",
                  "type": "string"
                },
                "statusCode": {
                  "description": "Status code",
                  "type": "integer"
                }
              },
              "type": "object"
            }
          ]
        }
      },
      "propertyNames": {
        "pattern": "^\\d+$"
      },
      "type": "object"
    },
    "routes": {
      "default": [
        {
          "rewrite": "/example.html",
          "route": "/example"
        }
      ],
      "description": "Route definitions to modify routing behavior",
      "items": {
        "anyOf": [
          {
            "allOf": [
              {
                "$ref": "#/definitions/route"
              }
            ]
          }
        ],
        "examples": [
          {
            "rewrite": "/example.html",
            "route": "/example"
          },
          {
            "redirect": "/.auth/login/github",
            "route": "/login"
          }
        ]
      },
      "type": "array"
    },
    "trailingSlash": {
      "description": "Trailing slash configuration",
      "enum": ["always", "never", "auto"],
      "type": "string"
    }
  },
  "title": "Azure Static Web Apps configuration file",
  "type": "object"
}
