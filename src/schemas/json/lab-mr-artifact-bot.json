{
    "definitions": {},
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "http://example.com/root.json",
    "type": "object",
    "title": "Lab MR Artifact Bot Config",
    "description": "Each key/value pair is a project to monitor. The key should be the full path of the GitLab project on your instance.",
    "patternProperties": {
        "^#.*": {
            "title": "Keys starting with # are ignored"
        },
        "^[$].*": {
            "title": "Keys starting with $ (like $schema) are ignored"
        }
    },
    "additionalProperties": {
        "type": "object",
        "title": "Project",
        "description": "Key must match the project path on the GitLab instance (usually org/project)",
        "patternProperties": {
            "^#.*": {
                "title": "Keys starting with # are ignored"
            }
        },
        "properties": {
            "actually_post": {
                "$id": "#/additionalProperties/properties/actually_post",
                "type": "boolean",
                "title": "Whether posting on merge requests is enabled",
                "default": true
            },
            "project_id": {
                "$id": "#/additionalProperties/properties/project_id",
                "type": "integer",
                "title": "Numeric project ID, if known"
            },
            "mr_template_filename": {
                "$id": "#/additionalProperties/properties/mr_template_filename",
                "title": "Path to template file in repo",
                "description": "The MR target branch is where this is retrieved from. Set to null to explicitly disable this.",
                "oneOf": [
                    {
                        "type": "null",
                        "title": "Explicitly disable retrieving template from repo"
                    },
                    {
                        "type": "string",
                        "default": ".artifact-bot.md"
                    }
                ]
            },
            "mr_template_source": {
                "$id": "#/additionalProperties/properties/mr_template_source",
                "title": "Fallback Jinja2 template source",
                "description": "Used if the merge target branch lacks a template file or if it is explicitly disabled.",
                "oneOf": [
                    {
                        "type": "array",
                        "items": {
                            "$id": "#/additionalProperties/properties/mr_template_source/array/items",
                            "type": "string",
                            "title": "Template lines (joined by newline)"
                        }
                    },
                    {
                        "$id": "#/additionalProperties/properties/mr_template_source/string",
                        "type": "string",
                        "title": "Template (all in one string)"
                    }
                ]
            }
        },
        "additionalProperties": false
    }
}
