{
  "$id": "https://aka.ms/winget-manifest.installer.1.0.0.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "Capabilities": {
      "description": "List of appx or msix installer capabilities",
      "items": {
        "maxLength": 40,
        "minLength": 1,
        "type": "string"
      },
      "maxItems": 1000,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "Channel": {
      "description": "The distribution channel",
      "maxLength": 16,
      "minLength": 1,
      "type": ["string", "null"]
    },
    "Commands": {
      "description": "List of commands or aliases to run the package",
      "items": {
        "maxLength": 40,
        "minLength": 1,
        "type": "string"
      },
      "maxItems": 16,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "Dependencies": {
      "properties": {
        "ExternalDependencies": {
          "description": "List of external package dependencies",
          "items": {
            "maxLength": 128,
            "minLength": 1,
            "type": "string"
          },
          "maxItems": 16,
          "type": ["array", "null"],
          "uniqueItems": true
        },
        "PackageDependencies": {
          "description": "List of package dependencies from current source",
          "items": {
            "properties": {
              "MinimumVersion": {
                "$ref": "#/definitions/PackageVersion"
              },
              "PackageIdentifier": {
                "$ref": "#/definitions/PackageIdentifier"
              }
            },
            "required": ["PackageIdentifier"],
            "type": "object"
          },
          "maxItems": 16,
          "type": ["array", "null"],
          "uniqueItems": true
        },
        "WindowsFeatures": {
          "description": "List of Windows feature dependencies",
          "items": {
            "maxLength": 128,
            "minLength": 1,
            "type": "string"
          },
          "maxItems": 16,
          "type": ["array", "null"],
          "uniqueItems": true
        },
        "WindowsLibraries": {
          "description": "List of Windows library dependencies",
          "items": {
            "maxLength": 128,
            "minLength": 1,
            "type": "string"
          },
          "maxItems": 16,
          "type": ["array", "null"],
          "uniqueItems": true
        }
      },
      "type": ["object", "null"]
    },
    "FileExtensions": {
      "description": "List of file extensions the package could support",
      "items": {
        "maxLength": 40,
        "pattern": "^[^\\\\/:\\*\\?\"<>\\|\\x01-\\x1f]+$",
        "type": "string"
      },
      "maxItems": 256,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "InstallModes": {
      "description": "List of supported installer modes",
      "items": {
        "enum": ["interactive", "silent", "silentWithProgress"],
        "title": "InstallModes",
        "type": "string"
      },
      "maxItems": 3,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "Installer": {
      "properties": {
        "Architecture": {
          "description": "The installer target architecture",
          "enum": ["x86", "x64", "arm", "arm64", "neutral"],
          "type": "string"
        },
        "Capabilities": {
          "$ref": "#/definitions/Capabilities"
        },
        "Commands": {
          "$ref": "#/definitions/Commands"
        },
        "Dependencies": {
          "$ref": "#/definitions/Dependencies"
        },
        "FileExtensions": {
          "$ref": "#/definitions/FileExtensions"
        },
        "InstallModes": {
          "$ref": "#/definitions/InstallModes"
        },
        "InstallerLocale": {
          "$ref": "#/definitions/Locale"
        },
        "InstallerSha256": {
          "description": "Sha256 is required. Sha256 of the installer",
          "pattern": "^[A-Fa-f0-9]{64}$",
          "type": "string"
        },
        "InstallerSuccessCodes": {
          "$ref": "#/definitions/InstallerSuccessCodes"
        },
        "InstallerSwitches": {
          "$ref": "#/definitions/InstallerSwitches"
        },
        "InstallerType": {
          "$ref": "#/definitions/InstallerType"
        },
        "InstallerUrl": {
          "description": "The installer Url",
          "pattern": "^([Hh][Tt][Tt][Pp][Ss]?)://.+$",
          "type": "string"
        },
        "MinimumOSVersion": {
          "$ref": "#/definitions/MinimumOSVersion"
        },
        "PackageFamilyName": {
          "$ref": "#/definitions/PackageFamilyName"
        },
        "Platform": {
          "$ref": "#/definitions/Platform"
        },
        "ProductCode": {
          "$ref": "#/definitions/ProductCode"
        },
        "Protocols": {
          "$ref": "#/definitions/Protocols"
        },
        "RestrictedCapabilities": {
          "$ref": "#/definitions/RestrictedCapabilities"
        },
        "Scope": {
          "$ref": "#/definitions/Scope"
        },
        "SignatureSha256": {
          "description": "SignatureSha256 is recommended for appx or msix. It is the sha256 of signature file inside appx or msix. Could be used during streaming install if applicable",
          "pattern": "^[A-Fa-f0-9]{64}$",
          "type": ["string", "null"]
        },
        "UpgradeBehavior": {
          "$ref": "#/definitions/UpgradeBehavior"
        }
      },
      "required": ["Architecture", "InstallerUrl", "InstallerSha256"],
      "type": "object"
    },
    "InstallerSuccessCodes": {
      "description": "List of additional non-zero installer success exit codes other than known default values by winget",
      "items": {
        "not": {
          "enum": [0]
        },
        "type": "integer"
      },
      "maxItems": 16,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "InstallerSwitches": {
      "properties": {
        "Custom": {
          "description": "Custom switches will be passed directly to the installer by winget",
          "maxLength": 2048,
          "minLength": 1,
          "type": ["string", "null"]
        },
        "InstallLocation": {
          "description": "InstallLocation is the value passed to the installer for custom install location. <INSTALLPATH> token can be included in the switch value so that winget will replace the token with user provided path",
          "maxLength": 512,
          "minLength": 1,
          "type": ["string", "null"]
        },
        "Interactive": {
          "description": "Interactive is the value that should be passed to the installer when user chooses an interactive install",
          "maxLength": 512,
          "minLength": 1,
          "type": ["string", "null"]
        },
        "Log": {
          "description": "Log is the value passed to the installer for custom log file path. <LOGPATH> token can be included in the switch value so that winget will replace the token with user provided path",
          "maxLength": 512,
          "minLength": 1,
          "type": ["string", "null"]
        },
        "Silent": {
          "description": "Silent is the value that should be passed to the installer when user chooses a silent or quiet install",
          "maxLength": 512,
          "minLength": 1,
          "type": ["string", "null"]
        },
        "SilentWithProgress": {
          "description": "SilentWithProgress is the value that should be passed to the installer when user chooses a non-interactive install",
          "maxLength": 512,
          "minLength": 1,
          "type": ["string", "null"]
        },
        "Upgrade": {
          "description": "Upgrade is the value that should be passed to the installer when user chooses an upgrade",
          "maxLength": 512,
          "minLength": 1,
          "type": ["string", "null"]
        }
      },
      "type": "object"
    },
    "InstallerType": {
      "description": "Enumeration of supported installer types",
      "enum": [
        "msix",
        "msi",
        "appx",
        "exe",
        "zip",
        "inno",
        "nullsoft",
        "wix",
        "burn",
        "pwa"
      ],
      "type": ["string", "null"]
    },
    "Locale": {
      "description": "The package meta-data locale",
      "maxLength": 20,
      "minLength": 1,
      "type": ["string", "null"]
    },
    "MinimumOSVersion": {
      "description": "The installer minimum operating system version",
      "pattern": "^(0|[1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])(\\.(0|[1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])){0,3}$",
      "type": ["string", "null"]
    },
    "PackageFamilyName": {
      "description": "PackageFamilyName for appx or msix installer. Could be used for correlation of packages across sources",
      "maxLength": 255,
      "pattern": "^[A-Za-z0-9][-\\.A-Za-z0-9]+_[A-Za-z0-9]{13}$",
      "type": ["string", "null"]
    },
    "PackageIdentifier": {
      "description": "The package unique identifier",
      "maxLength": 128,
      "pattern": "^[^\\.\\s\\\\/:\\*\\?\"<>\\|\\x01-\\x1f]{1,32}(\\.[^\\.\\s\\\\/:\\*\\?\"<>\\|\\x01-\\x1f]{1,32}){1,3}$",
      "type": "string"
    },
    "PackageVersion": {
      "description": "The package version",
      "maxLength": 128,
      "pattern": "^[^\\\\/:\\*\\?\"<>\\|\\x01-\\x1f]+$",
      "type": "string"
    },
    "Platform": {
      "description": "The installer supported operating system",
      "items": {
        "enum": ["Windows.Desktop", "Windows.Universal"],
        "title": "Platform",
        "type": "string"
      },
      "maxItems": 2,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "ProductCode": {
      "description": "ProductCode could be used for correlation of packages across sources",
      "maxLength": 255,
      "minLength": 1,
      "type": ["string", "null"]
    },
    "Protocols": {
      "description": "List of protocols the package provides a handler for",
      "items": {
        "maxLength": 2048,
        "pattern": "^[a-z][-a-z0-9\\.\\+]*$",
        "type": "string"
      },
      "maxItems": 16,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "RestrictedCapabilities": {
      "description": "List of appx or msix installer restricted capabilities",
      "items": {
        "maxLength": 40,
        "minLength": 1,
        "type": "string"
      },
      "maxItems": 1000,
      "type": ["array", "null"],
      "uniqueItems": true
    },
    "Scope": {
      "description": "Scope indicates if the installer is per user or per machine",
      "enum": ["user", "machine"],
      "type": ["string", "null"]
    },
    "UpgradeBehavior": {
      "description": "The upgrade method",
      "enum": ["install", "uninstallPrevious"],
      "type": ["string", "null"]
    }
  },
  "description": "A representation of a single-file manifest representing an app installers in the OWC. v1.0.0",
  "properties": {
    "Capabilities": {
      "$ref": "#/definitions/Capabilities"
    },
    "Channel": {
      "$ref": "#/definitions/Channel"
    },
    "Commands": {
      "$ref": "#/definitions/Commands"
    },
    "Dependencies": {
      "$ref": "#/definitions/Dependencies"
    },
    "FileExtensions": {
      "$ref": "#/definitions/FileExtensions"
    },
    "InstallModes": {
      "$ref": "#/definitions/InstallModes"
    },
    "InstallerLocale": {
      "$ref": "#/definitions/Locale"
    },
    "InstallerSuccessCodes": {
      "$ref": "#/definitions/InstallerSuccessCodes"
    },
    "InstallerSwitches": {
      "$ref": "#/definitions/InstallerSwitches"
    },
    "InstallerType": {
      "$ref": "#/definitions/InstallerType"
    },
    "Installers": {
      "items": {
        "$ref": "#/definitions/Installer"
      },
      "maxItems": 128,
      "minItems": 1,
      "type": "array"
    },
    "ManifestType": {
      "const": "installer",
      "default": "installer",
      "description": "The manifest type",
      "type": "string"
    },
    "ManifestVersion": {
      "default": "1.0.0",
      "description": "The manifest syntax version",
      "pattern": "^(0|[1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])(\\.(0|[1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])){2}$",
      "type": "string"
    },
    "MinimumOSVersion": {
      "$ref": "#/definitions/MinimumOSVersion"
    },
    "PackageFamilyName": {
      "$ref": "#/definitions/PackageFamilyName"
    },
    "PackageIdentifier": {
      "$ref": "#/definitions/PackageIdentifier"
    },
    "PackageVersion": {
      "$ref": "#/definitions/PackageVersion"
    },
    "Platform": {
      "$ref": "#/definitions/Platform"
    },
    "ProductCode": {
      "$ref": "#/definitions/ProductCode"
    },
    "Protocols": {
      "$ref": "#/definitions/Protocols"
    },
    "RestrictedCapabilities": {
      "$ref": "#/definitions/RestrictedCapabilities"
    },
    "Scope": {
      "$ref": "#/definitions/Scope"
    },
    "UpgradeBehavior": {
      "$ref": "#/definitions/UpgradeBehavior"
    }
  },
  "required": [
    "PackageIdentifier",
    "PackageVersion",
    "Installers",
    "ManifestType",
    "ManifestVersion"
  ],
  "type": "object"
}
