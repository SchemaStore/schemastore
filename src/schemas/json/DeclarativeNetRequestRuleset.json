{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "array",
  "description": "A Collection of rules defined with the \"declarative_net_request\" manifest key and stored in the extension. An extension can enable and disable static rulesets using updateEnabledRulesets. The set of enabled static rulesets is persisted across sessions but not across extension updates. The static rulesets enabled on extension installation and update are determined by the content of the \"declarative_net_request\" manifest key.\n\nItem number limited by MAX_NUMBER_OF_STATIC_RULESETS https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/MAX_NUMBER_OF_STATIC_RULESETS\n\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest#rulesets",
  "maxItems": 50,
  "definitions": {
    "domains": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)|(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z]{2,63}|((25[0-5]|(2[0-4]|1\\d|[1-9]|)\\d)\\.?\\b){4}|\\[(?:[0-9a-f]{0,4}:){2,7}[0-9a-f]{0,4}\\])$",
        "$comment": "https://regexr.com/8b9gm",
        "description": "Domains specified in initiatorDomains, excludedInitiatorDomains, requestDomains, or excludedRequestDomains should comply with the following:\n\nSub-domains such as \"a.example.com\" are allowed.\nThe entries must consist of only lowercase ASCII characters.\nUse Punycode encoding for internationalized domains.\nIPv4 addresses must be represented as 4 numbers separated by a dot.\nIPv6 addresses should be represented in their canonical form, wrapped in square brackets.\n\nTo programmatically generate the canonical domain for a URL, use the URL API and read its hostname property, i.e., new URL(url).hostname.\n\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/RuleCondition#canonical_domain"
      }
    }
  },
  "items": {
    "required": [
      "id"
    ],
    "properties": {
      "id": {
        "type": "number",
        "description": "An ID that uniquely identifies a rule within a ruleset. Mandatory and should be >= 1"
      },
      "priority": {
        "type": "number",
        "description": "The rule priority. When specified, it should be >= 1. Defaults to 1. See Matching precedence for details on how priority affects which rules are applied.\n\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest#matching_precedence",
        "default": 1,
        "minimum": 1
      },
      "condition": {
        "type": "object",
        "description": "The condition under which this rule is triggered.",
        "properties": {
          "domainType": {
            "type": "string",
            "description": "Specifies whether the network request is first-party or third-party. The request is considered first-party if it's for the same domain as the document or subdocument that initiates the request. Otherwise, it's considered third-party.",
            "enum": [
              "first-party",
              "third-party"
            ]
          },
          "domains": {
            "$ref": "#/definitions/domains",
            "description": "Use initiatorDomains instead. The rule only matches network requests originating from this list of domains.\n\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/RuleCondition#domains"
          },
          "excludeDomains": {
            "$ref": "#/definitions/domains",
            "description": "Use excludedInitiatorDomains instead. The rule does not match network requests originating from this list of domains.\n\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/RuleCondition#excludeddomains"
          },
          "initiatorDomains": {
            "$ref": "#/definitions/domains",
            "description": "The rule only matches network requests originating from this list of domains. If the list is omitted, the rule is applied to requests from all domains. An empty list is not allowed. A canonical domain should be used. This matches against the request initiator and not the request URL.\n\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/RuleCondition#initiatordomains"
          },
          "excludedInitiatorDomains": {
            "$ref": "#/definitions/domains",
            "description": "The rule does not match network requests originating from this list of domains. If the list is empty or omitted, no domains are excluded. This takes precedence over initiatorDomains. A canonical domain should be used. This matches against the request initiator and not the request URL.\n\nhttps://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/declarativeNetRequest/RuleCondition#excludedinitiatordomains"
          }
        }
      },
      "action": {
        "type": "object",
        "description": "The action to take when the rule is matched. Rules can do one of these things:\nblock a network request.\nredirect a network request.\nmodify headers from a network request.\nprevent another matching rule from being applied.\n\nNote: A redirect action does not redirect the request, and the request continues as usual when:\nthe action does not change the request.\nthe redirect URL is invalid (e.g., the value of redirect.regexSubstitution is not a valid URL)."
      }
    }
  }
}
