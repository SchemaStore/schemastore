{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://devcenter.heroku.com/articles/app-json-schema",
  "type": "object",
  "title": "The Heroku app.json schema",
  "description": "",
  "default": {},
  "examples": [
    {
      "name": "Small Sharp Tool",
      "description": "This app does one little thing, and does it well.",
      "keywords": [
        "productivity",
        "HTML5",
        "scalpel"
      ],
      "website": "https://small-sharp-tool.com/",
      "repository": "https://github.com/jane-doe/small-sharp-tool",
      "logo": "https://small-sharp-tool.com/logo.svg",
      "success_url": "/welcome",
      "scripts": {
        "postdeploy": "bundle exec rake bootstrap"
      },
      "env": {
        "SECRET_TOKEN": {
          "description": "A secret key for verifying the integrity of signed cookies.",
          "generator": "secret"
        },
        "WEB_CONCURRENCY": {
          "description": "The number of processes to run.",
          "value": "5"
        }
      },
      "formation": {
        "web": {
          "quantity": 1,
          "size": "standard-1x"
        }
      },
      "image": "heroku/ruby",
      "addons": [
        "openredis",
        {
          "plan": "mongolab:shared-single-small",
          "as": "MONGO"
        },
        {
          "plan": "heroku-postgresql",
          "options": {
            "version": "9.5"
          }
        }
      ],
      "buildpacks": [
        {
          "url": "https://github.com/stomita/heroku-buildpack-phantomjs"
        }
      ],
      "environments": {
        "test": {
          "scripts": {
            "test": "bundle exec rake test"
          }
        }
      }
    }
  ],
  "additionalProperties": true,
  "properties": {
    "name": {
      "$id": "#/properties/name",
      "type": "string",
      "maxLength": 30,
      "title": "The name",
      "description": "A clean and simple name to identify the template.",
      "default": "",
      "examples": [
        "Small Sharp Tool"
      ]
    },
    "description": {
      "$id": "#/properties/description",
      "type": "string",
      "title": "The description",
      "description": "A brief summary of the app: what it does, who it’s for, why it exists, etc.",
      "default": "",
      "examples": [
        "This app does one little thing, and does it well."
      ]
    },
    "keywords": {
      "$id": "#/properties/keywords",
      "type": "array",
      "title": "The keywords schema",
      "description": "An array of strings describing the app.",
      "default": [],
      "examples": [
        [
          "productivity",
          "HTML5"
        ]
      ],
      "items": {
        "type": "string"
      }
    },
    "website": {
      "$id": "#/properties/website",
      "type": "string",
      "format": "uri",
      "title": "The website",
      "description": "The project’s website.",
      "default": "",
      "examples": [
        "https://small-sharp-tool.com/"
      ]
    },
    "repository": {
      "$id": "#/properties/repository",
      "type": "string",
      "format": "uri",
      "title": "The repository",
      "description": "The location of the application’s source code, such as a Git URL, GitHub URL, Subversion URL, or Mercurial URL.",
      "default": "",
      "examples": [
        "https://github.com/jane-doe/small-sharp-tool"
      ]
    },
    "logo": {
      "$id": "#/properties/logo",
      "type": "string",
      "format": "uri",
      "title": "The logo",
      "description": "The URL of the application’s logo image. Dimensions should be square. Format can be SVG, PNG, or JPG.",
      "default": "",
      "examples": [
        "https://small-sharp-tool.com/logo.svg"
      ]
    },
    "success_url": {
      "$id": "#/properties/success_url",
      "type": "string",
      "title": "The success_url",
      "description": "A URL specifying where to redirect the user once their new app is deployed. If value is a fully-qualified URL, the user should be redirected to that URL. If value begins with a slash /, the user should be redirected to that path in their newly deployed app.",
      "default": "",
      "examples": [
        "/welcome",
        "https://example.herokuapp.com"
      ]
    },
    "scripts": {
      "$id": "#/properties/scripts",
      "type": "object",
      "title": "The scripts",
      "description": "A key-value object specifying scripts or shell commands to execute at different stages in the build/release process.",
      "default": {},
      "examples": [
        {
          "postdeploy": "bundle exec rake bootstrap"
        }
      ],
      "additionalProperties": {
        "description": "A script or shell command to execute.",
        "type": "string"
      }
    },
    "env": {
      "$id": "#/properties/env",
      "type": "object",
      "title": "The env schema",
      "description": "A key-value object for config variables to add to the app’s runtime environment. Keys are the names of the config variables. Values can be strings or objects. If the value is a string, it will be used. If the value is an object, it defines specific requirements for that variable",
      "default": {},
      "examples": [
        {
          "SECRET_TOKEN": {
            "description": "A secret key for verifying the integrity of signed cookies.",
            "generator": "secret"
          },
          "WEB_CONCURRENCY": {
            "description": "The number of processes to run.",
            "value": "5"
          }
        }
      ],
      "additionalProperties": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "object",
            "properties": {
              "description": {
                "type": "string",
                "description": "a human-friendly blurb about what the value is for and how to determine what it should be"
              },
              "value": {
                "type": "string",
                "description": "a default value to use. This should always be a string."
              },
              "required": {
                "type": "boolean",
                "description": "A boolean indicating whether the given value is required for the app to function ",
                "default": true
              },
              "generator": {
                "type": "string",
                "description": "a string representing a function to call to generate the value. Currently the only supported generator is secret, which generates a pseudo-random string of characters.",
                "pattern": "^secret$"
              }
            }
          }
        ]
      }
    },
    "formation": {
      "$id": "#/properties/formation",
      "type": "object",
      "title": "The formation",
      "description": "A key-value object for process type configuration. Keys are the names of the process types. Values are objects like the formation resource.",
      "default": {},
      "examples": [
        {
          "web": {
            "quantity": 1,
            "size": "standard-1x"
          }
        }
      ],
      "additionalProperties": {
        "type": "object",
        "properties": {
          "quantity": {
            "type": "number",
            "description": "number of processes to maintain"
          },
          "size": {
            "type": "string",
            "description": "dyno size",
            "default": "standard-1X"
          }
        }
      }
    },
    "image": {
      "$id": "#/properties/image",
      "type": "string",
      "title": "The image",
      "description": "The Docker image that can be used to build the app. This key is used by Heroku Docker to provision local Docker containers. This key is deprecated.",
      "default": "",
      "examples": [
        "heroku/ruby"
      ]
    },
    "addons": {
      "$id": "#/properties/addons",
      "type": "array",
      "title": "The addons",
      "description": "An array of strings or objects specifying Heroku add-ons to provision on the app before deploying.",
      "default": [],
      "examples": [
        [
          "openredis",
          {
            "plan": "mongolab:shared-single-small",
            "as": "MONGO"
          },
          {
            "plan": "heroku-postgresql",
            "options": {
              "version": "9.5"
            }
          }
        ]
      ],
      "additionalItems": true,
      "items": {
        "anyOf": [
          {
            "$id": "#/properties/addons/items/anyOf/0",
            "type": "string",
            "title": "The first anyOf schema",
            "description": "If an add-on is given as a string, the string should should be in the format addon:plan or addon. The add-on will be provisioned with its default attachment name and options. The object form is preferred.",
            "default": "",
            "examples": [
              "openredis"
            ]
          },
          {
            "$id": "#/properties/addons/items/anyOf/1",
            "type": "object",
            "title": "The second anyOf schema",
            "description": "An explanation about the purpose of this instance.",
            "default": {},
            "examples": [
              {
                "plan": "mongolab:shared-single-small",
                "as": "MONGO"
              },
              {
                "plan": "heroku-postgresql",
                "options": {
                  "version": "9.5"
                }
              }
            ],
            "required": [
              "plan"
            ],
            "additionalProperties": true,
            "properties": {
              "plan": {
                "$id": "#/properties/addons/items/anyOf/1/properties/plan",
                "type": "string",
                "title": "The plan",
                "description": "The add-on and plan to provision. This should should be in the format addon:plan or addon. If plan is omitted, that addon’s default plan will be provisioned.",
                "default": "",
                "examples": [
                  "mongolab:shared-single-small",
                  "heroku-postgresql"
                ]
              },
              "as": {
                "$id": "#/properties/addons/items/anyOf/1/properties/as",
                "type": "string",
                "title": "The as schema",
                "description": "The attachment name for the new add-on. If the attachment name is omitted, the add-on will be attached using its default name.",
                "default": "",
                "examples": [
                  "MONGO"
                ]
              },
              "options": {
                "$id": "#/properties/addons/items/anyOf/1/properties/options",
                "type": "object",
                "title": "The options schema",
                "description": "Any add-on-specific options (for example, the database version to provision with Heroku PostgreSQL). Keys correspond to option names from the add-on’s documentation. Values correspond to add-on option values, and should be strings. For options that do not take a value, use the value true.",
                "default": {},
                "examples": [
                  {
                    "version": "9.5"
                  }
                ]
              }
            }
          }
        ],
        "$id": "#/properties/addons/items"
      }
    },
    "buildpacks": {
      "$id": "#/properties/buildpacks",
      "type": "array",
      "title": "The buildpacks",
      "description": "An array of objects specifying the buildpacks needed to build the app. The last buildpack in the list will be used to determine the process types for the application.",
      "default": [],
      "examples": [
        [
          {
            "url": "https://github.com/stomita/heroku-buildpack-phantomjs"
          }
        ]
      ],
      "items": {
        "anyOf": [
          {
            "$id": "#/properties/buildpacks/items/anyOf/0",
            "type": "object",
            "title": "The first anyOf schema",
            "description": "Each buildpack object must contain a url field where the buildpack can be downloaded or cloned from.",
            "examples": [
              {
                "url": "https://github.com/stomita/heroku-buildpack-phantomjs"
              }
            ],
            "required": [
              "url"
            ],
            "properties": {
              "url": {
                "$id": "#/properties/buildpacks/items/anyOf/0/properties/url",
                "type": "string",
                "title": "The url",
                "description": "A url field where the buildpack can be downloaded or cloned from.",
                "examples": [
                  "https://github.com/stomita/heroku-buildpack-phantomjs",
                  "https://github.com/heroku/heroku-buildpack-pgbouncer",
                  "heroku/ruby"
                ]
              }
            }
          }
        ],
        "$id": "#/properties/buildpacks/items"
      }
    },
    "environments": {
      "$id": "#/properties/environments",
      "type": "object",
      "title": "The environments schema",
      "description": "A key-value object holding environment-specific overrides for app.json keys. Each key in the object is the name of an environment. Each value in the environments object is an object holding any valid app.json keys. When the platform applies app.json to an app, the values for keys defined in the applicable environment completely replace the values defined in the base manifest.",
      "default": {},
      "examples": [
        {
          "test": {
            "scripts": {
              "test": "bundle exec rake test"
            },
            "env": {
              "SECRET_TOKEN": "test-secret"
            }
          }
        }
      ],
      "properties": {
        "test": {
          "$ref": "#"
        },
        "review": {
          "$ref": "#"
        }
      }
    }
  }
}