{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "JobEntry": {
      "additionalProperties": false,
      "properties": {
        "job": {
          "$ref": "#/definitions/JobModel"
        }
      },
      "required": ["job"],
      "title": "jobentry",
      "type": "object"
    },
    "JobModel": {
      "additionalProperties": false,
      "properties": {
        "abstract": {
          "default": false,
          "title": "abstract",
          "type": "boolean"
        },
        "allowed-projects": {
          "title": "allowed-projects",
          "type": "string"
        },
        "ansible-version": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "enum": ["2.7", "2.8", "2.9", "2.10", "2.11"],
              "type": "string"
            }
          ],
          "title": "ansible-version"
        },
        "attempts": {
          "title": "attempts",
          "type": "integer"
        },
        "branches": {
          "title": "branches",
          "type": "string"
        },
        "description": {
          "title": "description",
          "type": "string"
        },
        "dependencies": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "items": {
                "$ref": "#/definitions/JobDependencyModel"
              },
              "type": "array"
            }
          ],
          "title": "files"
        },
        "failure-url": {
          "title": "failure-url",
          "type": "string"
        },
        "files": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "title": "files"
        },
        "final": {
          "default": false,
          "title": "final",
          "type": "boolean"
        },
        "host-vars": {
          "additionalProperties": {
            "type": "object"
          },
          "title": "host-vars",
          "type": "object"
        },
        "irrelevant-files": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "title": "irrelevant-files"
        },
        "name": {
          "title": "name",
          "type": "string"
        },
        "nodeset": {
          "title": "nodeset"
        },
        "override-checkout": {
          "title": "override-checkout",
          "type": "string"
        },
        "parent": {
          "title": "parent",
          "type": "string"
        },
        "post-run": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "title": "post-run"
        },
        "post-timeout": {
          "title": "post-timeout",
          "type": "integer"
        },
        "pre-run": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "title": "pre-run"
        },
        "provides": {
          "items": {
            "type": "string"
          },
          "title": "provides",
          "type": "array"
        },
        "required-projects": {
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "$ref": "#/definitions/RequiredProjectModel"
              }
            ]
          },
          "title": "required-projects",
          "type": "array"
        },
        "requires": {
          "items": {
            "type": "string"
          },
          "title": "requires",
          "type": "array"
        },
        "roles": {
          "items": {
            "$ref": "#/definitions/ZuulRoleModel"
          },
          "title": "roles",
          "type": "array"
        },
        "run": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "title": "run"
        },
        "secrets": {
          "anyOf": [
            {
              "$ref": "#/definitions/JobSecretModel"
            },
            {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/definitions/JobSecretModel"
                  },
                  {
                    "type": "string"
                  }
                ]
              },
              "type": "array"
            }
          ],
          "title": "secrets"
        },
        "success-url": {
          "title": "success-url",
          "type": "string"
        },
        "tags": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "title": "tags"
        },
        "timeout": {
          "title": "timeout",
          "type": "integer"
        },
        "vars": {
          "title": "vars",
          "type": "object"
        },
        "voting": {
          "default": true,
          "title": "voting",
          "type": "boolean"
        }
      },
      "required": ["name"],
      "title": "jobmodel",
      "type": "object"
    },
    "JobDependencyModel": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "title": "name",
          "type": "string"
        },
        "soft": {
          "default": false,
          "title": "soft",
          "type": "boolean"
        }
      },
      "required": ["name"],
      "title": "jobdependencymodel",
      "type": "object"
    },
    "JobSecretModel": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "title": "name",
          "type": "string"
        },
        "pass-to-parent": {
          "default": false,
          "title": "pass-to-parent",
          "type": "boolean"
        },
        "secret": {
          "title": "secret",
          "type": "string"
        }
      },
      "required": ["name", "secret"],
      "title": "jobsecretmodel",
      "type": "object"
    },
    "PipelineModel": {
      "additionalProperties": false,
      "properties": {
        "jobs": {
          "items": {},
          "title": "jobs",
          "type": "array"
        },
        "queue": {
          "title": "queue",
          "type": "string"
        }
      },
      "title": "pipelinemodel",
      "type": "object"
    },
    "ProjectEntry": {
      "additionalProperties": false,
      "properties": {
        "project": {
          "$ref": "#/definitions/ProjectModel"
        }
      },
      "required": ["project"],
      "title": "projectentry",
      "type": "object"
    },
    "ProjectModel": {
      "additionalProperties": false,
      "properties": {
        "check": {
          "$ref": "#/definitions/PipelineModel"
        },
        "default-branch": {
          "title": "default-branch",
          "type": "string"
        },
        "description": {
          "title": "description",
          "type": "string"
        },
        "gate": {
          "$ref": "#/definitions/PipelineModel"
        },
        "name": {
          "title": "name",
          "type": "string"
        },
        "periodic-weekly": {
          "$ref": "#/definitions/PipelineModel"
        },
        "post": {
          "$ref": "#/definitions/PipelineModel"
        },
        "promote": {
          "$ref": "#/definitions/PipelineModel"
        },
        "release": {
          "$ref": "#/definitions/PipelineModel"
        },
        "templates": {
          "items": {
            "type": "string"
          },
          "title": "templates",
          "type": "array"
        },
        "third-party-check": {
          "$ref": "#/definitions/PipelineModel"
        },
        "vars": {
          "title": "vars",
          "type": "object"
        }
      },
      "title": "projectmodel",
      "type": "object"
    },
    "ProjectTemplateEntry": {
      "additionalProperties": false,
      "properties": {
        "project-template": {
          "$ref": "#/definitions/ProjectTemplateModel"
        }
      },
      "required": ["project-template"],
      "title": "projecttemplateentry",
      "type": "object"
    },
    "ProjectTemplateModel": {
      "additionalProperties": false,
      "properties": {
        "check": {
          "$ref": "#/definitions/PipelineModel"
        },
        "default-branch": {
          "title": "default-branch",
          "type": "string"
        },
        "description": {
          "title": "description",
          "type": "string"
        },
        "gate": {
          "$ref": "#/definitions/PipelineModel"
        },
        "name": {
          "title": "name",
          "type": "string"
        },
        "periodic-weekly": {
          "$ref": "#/definitions/PipelineModel"
        },
        "post": {
          "$ref": "#/definitions/PipelineModel"
        },
        "promote": {
          "$ref": "#/definitions/PipelineModel"
        },
        "release": {
          "$ref": "#/definitions/PipelineModel"
        },
        "third-party-check": {
          "$ref": "#/definitions/PipelineModel"
        },
        "vars": {
          "title": "vars",
          "type": "object"
        }
      },
      "required": ["name"],
      "title": "projecttemplatemodel",
      "type": "object"
    },
    "RequiredProjectModel": {
      "properties": {
        "name": {
          "title": "name",
          "type": "string"
        },
        "override-checkout": {
          "title": "override-checkout",
          "type": "string"
        }
      },
      "required": ["name"],
      "title": "requiredprojectmodel",
      "type": "object"
    },
    "SecretEntry": {
      "additionalProperties": false,
      "properties": {
        "secret": {
          "$ref": "#/definitions/SecretModel"
        }
      },
      "required": ["secret"],
      "title": "secretentry",
      "type": "object"
    },
    "SecretModel": {
      "additionalProperties": false,
      "properties": {
        "data": {
          "title": "data",
          "type": "object"
        },
        "name": {
          "title": "name",
          "type": "string"
        }
      },
      "required": ["name", "data"],
      "title": "secretmodel",
      "type": "object"
    },
    "ZuulRoleModel": {
      "additionalProperties": false,
      "properties": {
        "zuul": {
          "title": "zuul",
          "type": "string"
        }
      },
      "required": ["zuul"],
      "title": "zuulrolemodel",
      "type": "object"
    }
  },
  "examples": ["zuul.d/*.yaml", "zuul-tests.d/*.yaml", ".zuul.yaml"],
  "items": {
    "anyOf": [
      {
        "$ref": "#/definitions/JobEntry"
      },
      {
        "$ref": "#/definitions/ProjectEntry"
      },
      {
        "$ref": "#/definitions/ProjectTemplateEntry"
      },
      {
        "$ref": "#/definitions/SecretEntry"
      }
    ]
  },
  "title": "zuul config schema",
  "type": "array"
}
