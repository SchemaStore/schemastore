{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "gerrit-trigger": {
      "title": "Gerrit trigger",
      "description": "A Gerrit trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#trigger-configuration",
      "type": "object",
      "required": ["event"],
      "properties": {
        "event": {
          "description": "An event of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.event",
          "type": "string",
          "minLength": 1,
          "examples": ["patchset-created", "comment-added", "ref-updated"]
        },
        "branch": {
          "description": "A branch of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.branch",
          "type": "string",
          "minLength": 1,
          "examples": ["main", "dev"]
        },
        "ref": {
          "description": "A ref of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.ref",
          "type": "string",
          "minLength": 1
        },
        "ignore-deletes": {
          "description": "Whether to ignore branch deletions of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.ignore-deletes",
          "type": "boolean"
        },
        "approval": {
          "description": "An approval count of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.approval",
          "type": "integer",
          "minimum": 0
        },
        "email": {
          "description": "Performer emails of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.email",
          "oneOf": [
            {
              "type": "string",
              "format": "email"
            },
            {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "description": "A performer email of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.email",
                "type": "string",
                "format": "email"
              }
            }
          ]
        },
        "username": {
          "description": "Usernames of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.username",
          "oneOf": [
            {
              "type": "string",
              "minLength": 1
            },
            {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "description": "A username of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.username",
                "type": "string",
                "minLength": 1
              }
            }
          ]
        },
        "comment": {
          "description": "Comments of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.comment",
          "oneOf": [
            {
              "type": "string",
              "minLength": 1
            },
            {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "description": "A comment of the current trigger\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.comment",
                "type": "string",
                "minLength": 1
              }
            }
          ]
        },
        "require": {
          "description": "Conditions causing event of the current trigger to match\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.require"
        },
        "reject": {
          "description": "Conditions causing event of the current trigger not to match\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.trigger.%3Cgerrit%20source%3E.reject"
        }
      },
      "additionalProperties": false
    },
    "gerrit-reporter": {
      "title": "Gerrit reporter",
      "description": "A Gerrit reporter\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#reporter-configuration",
      "type": "object",
      "properties": {
        "submit": {
          "description": "Whether to submit change of the current reporter\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.reporter.%3Cgerrit%20reporter%3E.submit",
          "type": "boolean",
          "default": false
        },
        "comment": {
          "description": "Whether to comment change of the current reporter\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.reporter.%3Cgerrit%20reporter%3E.comment",
          "type": "boolean",
          "default": true
        }
      },
      "additionalProperties": {
        "description": "A reporter setting\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#reporter-configuration"
      }
    },
    "gerrit-requirements-time-span": {
      "type": "string",
      "pattern": "^[wdhm]\\d+$",
      "examples": [
        "48h",
        "2d"
      ]
    },
    "gerrit-requirements-approval-property": {
      "type": "object",
      "properties": {
        "username": {
          "description": "A username of the current approval\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.approval.username",
          "type": "string",
          "minLength": 1
        },
        "email": {
          "description": "An email of the current approval\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.approval.email",
          "type": "string",
          "format": "email"
        },
        "older-than": {
          "description": "A time span the current approval must to be older\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.approval.older-than",
          "$ref": "#/definitions/gerrit-requirements-time-span"
        },
        "newer-than": {
          "description": "A time span the current approval must to be newer\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.approval.older-than",
          "$ref": "#/definitions/gerrit-requirements-time-span"
        }
      },
      "additionalProperties": false
    },
    "gerrit-requirements": {
      "title": "Gerrit requirements",
      "description": "Gerrit requirements\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#requirements-configuration",
      "type": "object",
      "properties": {
        "approval": {
          "title": "approval",
          "description": "Approvals of the current requirement\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.approval",
          "oneOf": [
            {
              "$ref": "#/definitions/gerrit-requirements-approval-property"
            },
            {
              "type": "array",
              "uniqueItems": true,
              "items": {
                "$ref": "#/definitions/gerrit-requirements-approval-property"
              }
            }
          ]
        },
        "open": {
          "description": "Whether change of the current requirement must be opened\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.open",
          "type": "boolean"
        },
        "current-patchset": {
          "description": "Whether change of the current requirement must be the current patchset\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.current-patchset",
          "type": "boolean"
        },
        "wip": {
          "description": "Whether change of the current requirement must be WIP\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.wip",
          "type": "boolean"
        },
        "status": {
          "description": "A status of the current requirement\nhttps://zuul-ci.org/docs/zuul/latest/drivers/gerrit.html#attr-pipeline.require.%3Cgerrit%20source%3E.wip",
          "type": "string",
          "minLength": 1
        }
      },
      "additionalProperties": false
    }
  },
  "items": {
    "title": "configuration item",
    "description": "A configuration item for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/project-config.html#configuration-items",
    "type": "object",
    "oneOf": [
      {
        "title": "pipeline",
        "description": "A pipeline of the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html",
        "required": ["pipeline"],
        "properties": {
          "pipeline": {
            "title": "pipeline",
            "description": "A pipeline of the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#pipeline",
            "type": "object",
            "required": ["name", "manager"],
            "properties": {
              "name": {
                "description": "A name of the current pipeline\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.name",
                "type": "string",
                "minLength": 1,
                "examples": ["check", "post", "gate", "deploy", "promote"]
              },
              "manager": {
                "description": "A manager of the current pipeline\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.manager",
                "type": "string",
                "enum": ["independent", "dependent", "serial", "supercedent"]
              },
              "post-review": {
                "description": "Whether to execute reviewed code\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.post-review",
                "type": "boolean",
                "default": false
              },
              "description": {
                "description": "A description of the current pipeline\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.description",
                "type": "string",
                "minLength": 1
              },
              "variant-description": {
                "description": "A variant description of the current pipeline\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.variant-description",
                "type": "string",
                "minLength": 1,
                "default": "branch name"
              },
              "success-message": {
                "description": "A message of the current pipeline displayed when all jobs passed\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.success-message",
                "type": "string",
                "minLength": 1,
                "default": "Build successful."
              },
              "failure-message": {
                "description": "A message of the current pipeline displayed when at least one job failed\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.failure-message",
                "type": "string",
                "minLength": 1,
                "default": "Build failed."
              },
              "start-message": {
                "description": "A message of the current pipeline displayed when jobs have been started\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.start-message",
                "type": "string",
                "minLength": 1,
                "default": "Starting {pipeline.name} jobs."
              },
              "enqueue-message": {
                "description": "A message of the current pipeline displayed when it has been enqueued\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.enqueue-message",
                "type": "string",
                "minLength": 1
              },
              "merge-conflict-message": {
                "description": "A message of the current pipeline displayed when merge failed\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.merge-conflict-message",
                "type": "string",
                "minLength": 1,
                "default": "Merge failed."
              },
              "no-jobs-message": {
                "description": "A message of the current pipeline displayed when it has been dequeued without running jobs\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.no-jobs-message",
                "type": "string",
                "minLength": 1
              },
              "dequeue-message": {
                "description": "A message of the current pipeline displayed when it has been dequeued\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.dequeue-message",
                "type": "string",
                "minLength": 1,
                "default": "Build canceled."
              },
              "footer-message": {
                "description": "A message of the current pipeline displayed when jobs ended\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.footer-message",
                "type": "string",
                "minLength": 1
              },
              "trigger": {
                "title": "trigger",
                "description": "A trigger of the current pipeline\nhttps://zuul-ci.org/docs/zuul/latest/config/pipeline.html#attr-pipeline.trigger",
                "type": "object",
                "patternProperties": {
                  ".": {
                    "$ref": "#/definitions/gerrit-trigger"
                  }
                }
              },
              "require": {},
              "reject": {},
              "allow-other-connections": {},
              "supercedes": {},
              "dequeue-on-new-patchset": {},
              "ignore-dependencies": {},
              "precedence": {},
              "failure": {},
              "merge-conflict": {},
              "config-error": {},
              "enqueue": {},
              "start": {},
              "no-jobs": {},
              "disabled": {},
              "dequeue": {},
              "disable-after-consecutive-failures": {},
              "window": {},
              "window-floor": {},
              "window-increase-type": {},
              "window-increase-factor": {},
              "window-decrease-type": {},
              "window-decrease-factor": {}
            }
          }
        },
        "additionalProperties": false
      },
      {
        "title": "job",
        "description": "A job for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/job.html",
        "required": ["job"],
        "properties": {
          "job": {}
        },
        "additionalProperties": false
      },
      {
        "title": "project",
        "description": "A project for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/project.html",
        "required": ["project"],
        "properties": {
          "project": {}
        },
        "additionalProperties": false
      },
      {
        "title": "project-pipeline",
        "description": "A project pipeline for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/project.html#project-template",
        "required": ["project-pipeline"],
        "properties": {
          "project-pipeline": {}
        },
        "additionalProperties": false
      },
      {
        "title": "queue",
        "description": "A queue for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/queue.html",
        "required": ["queue"],
        "properties": {
          "queue": {}
        },
        "additionalProperties": false
      },
      {
        "title": "secret",
        "description": "A secret for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/secret.html",
        "required": ["secret"],
        "properties": {
          "secret": {}
        },
        "additionalProperties": false
      },
      {
        "title": "nodeset",
        "description": "A nodeset for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/nodeset.html",
        "required": ["nodeset"],
        "properties": {
          "nodeset": {}
        },
        "additionalProperties": false
      },
      {
        "title": "semaphore",
        "description": "A semaphore for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/semaphore.html",
        "required": ["semaphore"],
        "properties": {
          "semaphore": {}
        },
        "additionalProperties": false
      },
      {
        "title": "pragma",
        "description": "A pragma for the current repository\nhttps://zuul-ci.org/docs/zuul/latest/config/pragma.html",
        "required": ["pragma"],
        "properties": {
          "pragma": {}
        },
        "additionalProperties": false
      }
    ]
  },
  "title": "Zuul config",
  "type": "array"
}
