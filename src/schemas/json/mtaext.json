{
  "$id": "http://example.com/MTA/.mtaext",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "hooks": {
      "items": {
        "properties": {
          "name": {
            "description": "The name of the existing hook that will be modified by this extension.",
            "pattern": "^[A-Za-z0-9_\\-\\.]+$",
            "type": "string"
          },
          "parameters": {
            "description": "Configuration parameters that are used when executing the hook to the target runtime environment.",
            "type": "object"
          },
          "requires": {
            "description": "List of the existing required dependencies that will be modified by this extension.",
            "items": {
              "properties": {
                "name": {
                  "description": "The name of the existing required dependencies that will be modified.",
                  "pattern": "^[A-Za-z0-9_\\-\\.]+$",
                  "type": "string"
                },
                "parameters": {
                  "description": "Parameters can be used to influence the behavior of tools which interpret this descriptor. Parameters are not made available to the hook at runtime. Provided property values can be accessed by \"~{<provided-property-name>}\". Such expressions can be part of an arbitrary string",
                  "type": "object"
                }
              },
              "required": ["name"],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": ["name"],
        "type": "object"
      },
      "type": "array"
    }
  },
  "description": "MTA extension descriptor schema v3.3",
  "properties": {
    "ID": {
      "description": "A globally unique ID of this MTA extension descriptor. Unlimited string of unicode characters.",
      "pattern": "^[A-Za-z0-9_\\-\\.]+$",
      "type": "string"
    },
    "_schema-version": {
      "default": "3.3.0",
      "description": "Used to indicate to an MTA processing tool (e.g. a deployer), which schema version was taken as the base when authoring a descriptor.",
      "pattern": "^[1-9]\\d*(\\.\\d+){0,2}$",
      "type": "string"
    },
    "description": {
      "description": "A non-translatable description of this MTA extension. This is not a text for application users.",
      "type": "string"
    },
    "extends": {
      "description": "A globally unique ID of the MTA or the MTA extension which shall be extended by this descriptor.",
      "pattern": "^[A-Za-z0-9_\\-\\.]+$",
      "type": "string"
    },
    "hooks": {
      "$ref": "#/definitions/hooks",
      "description": "A list of the existing hooks that will be modified by the extension."
    },
    "module-types": {
      "description": "A list of existing module type definitions that will be modified by the extension.",
      "items": {
        "properties": {
          "name": {
            "description": "The name of the existing module type that will be modified.",
            "pattern": "^[A-Za-z0-9_\\-\\.]+$",
            "type": "string"
          },
          "parameters": {
            "description": "Configuration parameters that will be inherited in all modules of this type.",
            "type": "object"
          },
          "properties": {
            "description": "A collection of key-value pairs that will be inherited by all modules of this type.",
            "type": "object"
          }
        },
        "required": ["name"],
        "type": "object"
      },
      "type": "array"
    },
    "modules": {
      "description": "List of the existing modules that will be modified by the extension.",
      "items": {
        "properties": {
          "hooks": {
            "$ref": "#/definitions/hooks",
            "description": "A list of the existing hooks that will be modified by the extension."
          },
          "name": {
            "description": "The module name which must match an existing module defined by the deployment descriptor.",
            "pattern": "^[A-Za-z0-9_\\-\\.]+$",
            "type": "string"
          },
          "parameters": {
            "description": "Configuration parameters that are used when deploying the module to the target runtime environment.",
            "type": "object"
          },
          "properties": {
            "description": "A collection of key-value pairs that are available to the module at runtime.",
            "type": "object"
          },
          "provides": {
            "description": "List of the existing provided dependencies that will be modified by the extension.",
            "items": {
              "properties": {
                "name": {
                  "description": "The dependency name which must match an existing provided dependency defined by the deployment descriptor.",
                  "pattern": "^[A-Za-z0-9_\\-\\.]+$",
                  "type": "string"
                },
                "parameters": {
                  "description": "Parameters can be used to influence the behavior of tools which interpret this descriptor. Parameters are not made available to the module at runtime. Provided property values can be accessed by \"~{<provided-property-name>}\". Such expressions can be part of an arbitrary string",
                  "type": "object"
                },
                "properties": {
                  "description": "Property names and values make up the configuration data which is to be provided to requiring modules at runtime",
                  "type": "object"
                }
              },
              "required": ["name"],
              "type": "object"
            },
            "type": "array"
          },
          "requires": {
            "description": "List of the existing required dependencies that will be modified by the extension.",
            "items": {
              "properties": {
                "name": {
                  "description": "The dependency name which must match an existing required dependency defined by the deployment descriptor.",
                  "pattern": "^[A-Za-z0-9_\\-\\.]+$",
                  "type": "string"
                },
                "parameters": {
                  "description": "Parameters can be used to influence the behavior of tools which interpret this descriptor. Parameters are not made available to the module at runtime. Provided property values can be accessed by \"~{<provided-property-name>}\". Such expressions can be part of an arbitrary string",
                  "type": "object"
                },
                "properties": {
                  "description": "Required properties can be mapped from provided properties. Provided property values can be accessed by \"~{<provided-property-name>}\". Such expressions can be part of an arbitrary string",
                  "type": "object"
                }
              },
              "required": ["name"],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": ["name"],
        "type": "object"
      },
      "type": "array"
    },
    "parameters": {
      "description": "Global parameters that will be added to the application.",
      "type": "object"
    },
    "provider": {
      "description": "The provider or vendor.",
      "type": "string"
    },
    "resource-types": {
      "description": "A list of existing resource type definitions that will be modified by the extension.",
      "items": {
        "properties": {
          "name": {
            "description": "The name of the existing resource type that will be modified.",
            "pattern": "^[A-Za-z0-9_\\-\\.]+$",
            "type": "string"
          },
          "parameters": {
            "description": "Configuration parameters that will be inherited in all resources of this type.",
            "type": "object"
          },
          "properties": {
            "description": "A collection of key-value pairs that will be inherited by all modules of this type.",
            "type": "object"
          }
        },
        "required": ["name"],
        "type": "object"
      },
      "type": "array"
    },
    "resources": {
      "description": "List of the existing resources that will be modified by the extension.",
      "items": {
        "properties": {
          "active": {
            "description": "If a resource is declared to be active, it is allocated and bound according to declared requirements. Default value is true.",
            "type": "boolean"
          },
          "hooks": {
            "$ref": "#/definitions/hooks",
            "description": "List of existing hooks that will be modified by the extension."
          },
          "name": {
            "description": "The resource name which must match an existing resource defined by the deployment descriptor.",
            "pattern": "^[A-Za-z0-9_\\-\\.]+$",
            "type": "string"
          },
          "parameters": {
            "description": "Parameters can be used to influence the behavior of tools which interpret this descriptor. Parameters are not made available to requiring modules at runtime. Untyped resources cannot have parameters.",
            "type": "object"
          },
          "properties": {
            "description": "Property names and values make up the configuration data which is to be provided to requiring modules at runtime.",
            "type": "object"
          },
          "requires": {
            "description": "List of the existing required dependencies that will be modified by the extension.",
            "items": {
              "properties": {
                "name": {
                  "description": "The name of the existing required dependency that will be modified.",
                  "pattern": "^[A-Za-z0-9_\\-\\.]+$",
                  "type": "string"
                },
                "parameters": {
                  "description": "Parameters can be used to influence the behavior of tools which interpret this descriptor. Parameters are not made available to the resource at runtime. Provided property values can be accessed by \"~{<provided-property-name>}\". Such expressions can be part of an arbitrary string",
                  "type": "object"
                },
                "properties": {
                  "description": "Required properties can be mapped from provided properties. Provided property values can be accessed by \"~{<provided-property-name>}\". Such expressions can be part of an arbitrary string",
                  "type": "object"
                }
              },
              "required": ["name"],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": ["name"],
        "type": "object"
      },
      "type": "array"
    }
  },
  "required": ["_schema-version", "ID", "extends"],
  "title": ".mtaext v3.3",
  "type": "object"
}
