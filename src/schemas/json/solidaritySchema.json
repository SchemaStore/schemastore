{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "definitions": {
    "cli": {
      "description": "CLI Rule",
      "properties": {
        "binary": {
          "type": "string"
        },
        "ci": {
          "type": "boolean"
        },
        "error": {
          "type": "string"
        },
        "line": {
          "type": ["string", "integer"]
        },
        "matchIndex": {
          "type": "integer"
        },
        "platform": {
          "enum": [
            "darwin",
            "macos",
            "freebsd",
            "linux",
            "sunos",
            "win32",
            "windows"
          ]
        },
        "rule": {
          "enum": ["cli"]
        },
        "semver": {
          "type": "string"
        },
        "version": {
          "type": "string"
        }
      },
      "required": ["rule", "binary"],
      "type": "object"
    },
    "custom": {
      "additionalProperties": true,
      "description": "Custom Rule",
      "properties": {
        "ci": {
          "type": "boolean"
        },
        "error": {
          "type": "string"
        },
        "match": {
          "description": "A regexp to search the output.",
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "platform": {
          "enum": [
            "darwin",
            "macos",
            "freebsd",
            "linux",
            "sunos",
            "win32",
            "windows"
          ]
        },
        "plugin": {
          "type": "string"
        },
        "rule": {
          "enum": ["custom"]
        }
      },
      "required": ["rule", "plugin", "name"],
      "type": "object"
    },
    "dir": {
      "description": "Dir Rule",
      "properties": {
        "ci": {
          "type": "boolean"
        },
        "error": {
          "type": "string"
        },
        "platform": {
          "enum": [
            "darwin",
            "macos",
            "freebsd",
            "linux",
            "sunos",
            "win32",
            "windows"
          ]
        },
        "rule": {
          "enum": ["dir", "directory"]
        }
      },
      "required": ["rule", "location"],
      "type": "object"
    },
    "env": {
      "description": "ENV Rule",
      "properties": {
        "ci": {
          "type": "boolean"
        },
        "error": {
          "type": "string"
        },
        "platform": {
          "enum": [
            "darwin",
            "macos",
            "freebsd",
            "linux",
            "sunos",
            "win32",
            "windows"
          ]
        },
        "rule": {
          "enum": ["env"]
        }
      },
      "required": ["rule", "variable"],
      "type": "object"
    },
    "file": {
      "description": "File Rule",
      "properties": {
        "ci": {
          "type": "boolean"
        },
        "error": {
          "type": "string"
        },
        "platform": {
          "enum": [
            "darwin",
            "macos",
            "freebsd",
            "linux",
            "sunos",
            "win32",
            "windows"
          ]
        },
        "rule": {
          "enum": ["file"]
        }
      },
      "required": ["rule", "location"],
      "type": "object"
    },
    "shell": {
      "description": "Shell Rule",
      "properties": {
        "ci": {
          "type": "boolean"
        },
        "error": {
          "type": "string"
        },
        "match": {
          "description": "A regexp to search the output.",
          "type": "string"
        },
        "platform": {
          "enum": [
            "darwin",
            "macos",
            "freebsd",
            "linux",
            "sunos",
            "win32",
            "windows"
          ]
        },
        "rule": {
          "enum": ["shell"]
        }
      },
      "required": ["rule", "match"],
      "type": "object"
    }
  },
  "description": "A rule-set and config for the Solidarity JSON checker",
  "properties": {
    "config": {
      "properties": {
        "output": {
          "description": "Identify what kind output should happen when a check is called",
          "enum": ["moderate", "verbose", "silent"],
          "type": "string"
        }
      },
      "type": "object"
    },
    "requirements": {
      "additionalProperties": {
        "items": {
          "oneOf": [
            {
              "$ref": "#/definitions/cli"
            },
            {
              "$ref": "#/definitions/dir"
            },
            {
              "$ref": "#/definitions/file"
            },
            {
              "$ref": "#/definitions/env"
            },
            {
              "$ref": "#/definitions/shell"
            },
            {
              "$ref": "#/definitions/custom"
            }
          ],
          "type": "object"
        },
        "minItems": 1,
        "type": "array",
        "uniqueItems": true
      },
      "description": "List of requirement rules for your particular environment",
      "type": "object"
    }
  },
  "required": ["requirements"],
  "title": "Solidarity",
  "type": "object"
}
