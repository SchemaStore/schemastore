{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "additionalProperties": {
    "$ref": "#/definitions/target"
  },
  "definitions": {
    "eventType": {
      "default": "all",
      "description": "Specify the type watch event that trigger the specified task.",
      "enum": ["all", "changed", "added", "deleted"],
      "type": "string"
    },
    "options": {
      "allOf": [
        {
          "$ref": "#/definitions/optionsWithEvents"
        }
      ],
      "description": "One or more files to watch.",
      "properties": {
        "atBegin": {
          "default": false,
          "description": "This option will trigger the run of each specified task at startup of the watcher.",
          "type": "boolean"
        },
        "cwd": {
          "description": "Ability to set the current working directory.",
          "type": ["string", "object"]
        },
        "debounceDelay": {
          "default": 500,
          "description": "How long to wait before emitting events in succession for the same filepath and status. For example if your Gruntfile.js file was changed, a 'changed' event will only fire again after the given milliseconds.",
          "type": "integer"
        },
        "forever": {
          "default": true,
          "description": "This is only a task level option and cannot be configured per target. By default the watch task will duck punch grunt.fatal and grunt.warn to try and prevent them from exiting the watch process. If you don't want grunt.fatal and grunt.warn to be overridden set the forever option to false.",
          "type": "boolean"
        },
        "interrupt": {
          "default": false,
          "description": "As files are modified this watch task will spawn tasks in child processes.",
          "type": "boolean"
        },
        "interval": {
          "default": 100,
          "description": "The interval is passed to 'fs.watchFile'. Since 'interval' is only used by 'fs.watchFile' and this watcher also uses 'fs.watch'; it is recommended to ignore this option.",
          "type": "integer"
        },
        "livereload": {
          "default": false,
          "description": "If enabled a live reload server will be started with the watch task per target. Then after the indicated tasks have run, the live reload server will be triggered with the modified files.",
          "type": ["boolean", "number"]
        },
        "livereloadOnError": {
          "default": true,
          "description": "Option to prevent the livereload if the executed tasks encountered an error. If set to  false , the livereload will only be triggered if all tasks completed successfully.",
          "type": "boolean"
        },
        "reload": {
          "default": false,
          "description": "By default, if Gruntfile.js is being watched, then changes to it will trigger the watch task to restart, and reload the Gruntfile.js changes. When reload is set to true, changes to any of the watched files will trigger the watch task to restart. This is especially useful if your Gruntfile.js is dependent on other files.",
          "type": "boolean"
        },
        "spawn": {
          "default": true,
          "description": "Whether to spawn task runs in a child process.",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "optionsWithEvents": {
      "oneOf": [
        {
          "properties": {
            "events": {
              "description": "Specify the type watch event that trigger the specified task.",
              "items": {
                "$ref": "#/definitions/eventType"
              },
              "type": "array"
            }
          }
        },
        {
          "properties": {
            "events": {
              "$ref": "#/definitions/eventType"
            }
          }
        }
      ]
    },
    "target": {
      "properties": {
        "files": {
          "description": "One or more files to watch.",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "options": {
          "$ref": "#/definitions/options"
        },
        "tasks": {
          "description": "One or more tasks to run.",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "required": ["files"]
    }
  },
  "properties": {
    "options": {
      "$ref": "#/definitions/options"
    }
  },
  "title": "JSON schema for the Grunt Watch task",
  "type": "object"
}
