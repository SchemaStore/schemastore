{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "stringArray": {
      "items": {
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    }
  },
  "oneOf": [
    {
      "required": ["author"]
    },
    {
      "required": ["authors"]
    }
  ],
  "properties": {
    "author": {
      "description": "The person who created the package. Alternatively you may use the `authors` property if multiple people have to be credited.",
      "type": "string"
    },
    "authors": {
      "description": "Array of authors who have contributed to this package. Cannot be used together with `author`.",
      "type": "array"
    },
    "bugs": {
      "description": "A public URL where issues, suggestions, and bugs can be reported by users.",
      "format": "url",
      "type": "string"
    },
    "changelog": {
      "description": "A public URL where update and release notes for the package can be found.",
      "format": "url",
      "type": "string"
    },
    "compatibleCoreVersion": {
      "description": "Specifies the latest Foundry version this package is compatible with.",
      "type": "string"
    },
    "dependencies": {
      "description": "Packages can require other modules, systems, or worlds be installed to allow their use.",
      "items": {
        "description": "The definition of a dependency package.",
        "properties": {
          "manifest": {
            "description": "Provides an explicit URL to the dependency's manifest to be able to install the package. If not provided, Foundry will check the website package list.",
            "type": "string"
          },
          "name": {
            "description": "Name of the package this package depends on.",
            "type": "string"
          },
          "type": {
            "default": "module",
            "description": "The type of dependency.",
            "enum": ["module", "system", "world"],
            "type": "string"
          }
        },
        "required": ["name"],
        "type": "object"
      },
      "type": "array"
    },
    "description": {
      "description": "A description of the package which appears in the Setup menu. May contain HTML tags to structure and style the text.",
      "type": "string"
    },
    "download": {
      "description": "A public URL pointing to a ZIP file that will be downloaded by Foundry to install or update the package. This can be a Git archive, a file stored in the repository, or a file stored somewhere else.",
      "format": "url",
      "type": "string"
    },
    "esmodules": {
      "$ref": "#/definitions/stringArray",
      "description": "A list of JavaScript ES modules to include when this package is used. Paths are relative to the package root directory. Modules will be loaded in the listed order as modules."
    },
    "gridDistance": {
      "description": "Integer specifying the default size of a grid space.",
      "type": "integer"
    },
    "gridUnits": {
      "description": "A label that specifies the default unit of measure used by the system.",
      "type": "string"
    },
    "initiative": {
      "description": "Specifies the default initiative formula if applicable to the system.",
      "type": "string"
    },
    "languages": {
      "description": "A list of localization files that Foundry can use to translate strings.",
      "items": {
        "description": "The language definition",
        "properties": {
          "lang": {
            "description": "The language code for this definition.",
            "type": "string"
          },
          "name": {
            "description": "The formal readable name of the language.",
            "type": "string"
          },
          "path": {
            "description": "Relative path to the JSON localization file.",
            "type": "string"
          }
        },
        "required": ["lang", "name", "path"],
        "type": "object"
      },
      "type": "array"
    },
    "license": {
      "description": "Relative path to a file or a URL that points to the package's license.",
      "type": "string"
    },
    "manifest": {
      "description": "A fixed URL that links to the latest release version of the package. This is used by Foundry to install and update packages.",
      "format": "url",
      "type": "string"
    },
    "minimumCoreVersion": {
      "description": "Specifies the minimum Foundry version required to be able to install and use this package.",
      "type": "string"
    },
    "name": {
      "description": "The unique package identifier. This must be lowercase and contain no special characters other than hyphens to separate multiple terms. This must also match the name of the directory.",
      "type": "string"
    },
    "packs": {
      "description": "A list of Compendium packs that are included with the package and should be loaded.",
      "items": {
        "description": "The definition of a Compendium pack.",
        "properties": {
          "entity": {
            "description": "Each Compendium pack must designate which type of Entity it contains.",
            "enum": [
              "Actor",
              "Item",
              "Journal",
              "JournalEntry",
              "Macro",
              "Command",
              "Playlist",
              "RollTable",
              "Table",
              "Scene"
            ],
            "type": "string"
          },
          "label": {
            "description": "Human readable label of the Compendium pack. This is displayed in the Compendium sidebar.",
            "type": "string"
          },
          "module": {
            "description": "The name of the module that provides the Compendium pack.",
            "type": "string"
          },
          "name": {
            "description": "Name of the Compendium pack. This should be a lowercase string with no special characters other than hyphens.",
            "type": "string"
          },
          "path": {
            "description": "The relative path to the Compendium .db file. Best practice is to put these in the /packs subdirectory.",
            "type": "string"
          },
          "system": {
            "description": "The name of the system the Compendium pack is created for. This ensures Foundry knows this Compendium only works for that system. This may be a string or an array of strings.",
            "items": {
              "type": "string"
            },
            "type": ["string", "array"]
          }
        },
        "required": ["name", "label", "system", "path", "entity"],
        "type": "object"
      },
      "type": "array"
    },
    "primaryTokenAttribute": {
      "description": "An attribute path within the system data model that points to an object that contains both a `value` and a `max` key. The prototype Token will automatically set its primary attribute to this value.",
      "type": ["null", "string"]
    },
    "readme": {
      "description": "Relative path to a file or a URL that points to the package's readme or documentation.",
      "type": "string"
    },
    "scripts": {
      "$ref": "#/definitions/stringArray",
      "description": "A list of JavaScript file paths to include when this package is used. Paths are relative to the package root directory. Scripts will be loaded in the listed order as standard scripts."
    },
    "secondaryTokenAttribute": {
      "description": "An attribute path within the system data model that points to an object that contains both a `value` and a `max` key. The prototype Token will automatically set its secondary attribute to this value.",
      "type": ["null", "string"]
    },
    "socket": {
      "description": "Enables the package to use a custom socket name to send and receive data from clients.",
      "type": "boolean"
    },
    "styles": {
      "$ref": "#/definitions/stringArray",
      "description": "A list of CSS file paths to include when this package is used. Paths are relative to the package root directory. Files will be loaded in the listed order."
    },
    "system": {
      "description": "A string or array of strings specifying which systems this module is compatible with.",
      "type": ["string", "array"]
    },
    "title": {
      "description": "The human readable title of the package which is displayed in the Setup menu and elsewhere.",
      "type": "string"
    },
    "url": {
      "description": "A public URL that links to the package's website or repository. This will be displayed to allow users to find more information.",
      "format": "url",
      "type": "string"
    },
    "version": {
      "description": "Specifies the version number as a number or string. Incrementing this will allow Foundry to update the installed package for users and migrate their data if necessary.",
      "type": ["number", "string"]
    }
  },
  "required": ["name", "title", "description", "version", "minimumCoreVersion"],
  "title": "JSON schema for Foundry VTT system.json and module.json files.",
  "type": "object"
}
