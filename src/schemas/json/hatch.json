{
  "$id": "https://json.schemastore.org/hatch.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "definitions": {
    "Metadata": {
      "title": "Metadata",
      "type": "object",
      "properties": {
        "allow-direct-references": {
          "title": "Allow-Direct-References",
          "description": "Whether to allow direct references",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/metadata/#allowing-direct-references"
            }
          },
          "type": "boolean"
        },
        "allow-ambiguous-features": {
          "title": "Allow-Ambiguous-Features",
          "description": "Whether to allow ambiguous features",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/metadata/#allowing-ambiguous-features"
            }
          },
          "type": "boolean"
        }
      }
    },
    "Env": {
      "title": "Env",
      "type": "object",
      "properties": {
        "template": {
          "title": "Template",
          "description": "Template environment to inherit from. Set to own name to make self referential (disable inheritance from “default”)",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#inheritance"
            }
          },
          "type": "string",
          "default": "default"
        },
        "detached": {
          "title": "Detached",
          "description": "Make the environment self-referential and skip project install",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#detached-environments"
            }
          },
          "type": "boolean",
          "default": false
        },
        "dependencies": {
          "title": "Dependencies",
          "description": "List of dependencies to install in the environment",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#dependencies"
            }
          },
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "extra-dependencies": {
          "title": "Extra dependencies",
          "description": "List of extra dependencies to install in the environment in addition to the template environment’s dependencies",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#dependencies"
            }
          },
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "features": {
          "title": "Features (extras)",
          "description": "List of optional dependency groups (extras) to install",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#features"
            }
          },
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "dev-mode": {
          "title": "Dev mode",
          "description": "Whether to install the project in development mode",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#dev-mode"
            }
          },
          "type": "boolean",
          "default": true
        },
        "skip-install": {
          "title": "Skip install",
          "description": "Whether to skip installing the project",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#skip-install"
            }
          },
          "type": "boolean",
          "default": false
        },
        "env-vars": {
          "title": "Environment variables",
          "description": "Environment variables to set",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#defined"
            }
          },
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "env-include": {
          "title": "Environment variable include",
          "description": "Glob patterns of environment variables to include",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#filters"
            }
          },
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "env-exclude": {
          "title": "Environment variable exclude",
          "description": "Glob patterns of environment variables to exclude",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#filters"
            }
          },
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "scripts": {
          "title": "Scripts",
          "description": "Dictionary of scripts to run",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#scripts"
            }
          },
          "type": "object",
          "additionalProperties": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          }
        },
        "pre-install-commands": {
          "title": "Pre-install commands",
          "description": "List of commands to run before installing the project",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#pre-install"
            }
          },
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "post-install-commands": {
          "title": "Post-install commands",
          "description": "List of commands to run after installing the project",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#post-install"
            }
          },
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "python": {
          "title": "Python version",
          "description": "Python version to use or an absolute path to a python interpreter",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#python-version"
            }
          },
          "type": "string"
        },
        "platforms": {
          "title": "Platforms",
          "description": "List of platforms to build for",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#supported-platforms"
            }
          },
          "type": "array",
          "items": {
            "enum": ["linux", "windows", "macos"]
          }
        },
        "description": {
          "title": "Description",
          "description": "Description of the environment for the `env show` command",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#description"
            }
          },
          "type": "string"
        },
        "type": {
          "title": "Type",
          "description": "Type of environment. Without plugins, the only supported type is \"virtual\"",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/overview/#type"
            }
          },
          "type": "string",
          "default": "virtual"
        },
        "matrix": {
          "title": "Matrix",
          "description": "Matrix of environments",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/advanced/#matrix"
            }
          },
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "matrix-name-format": {
          "title": "Matrix name format",
          "description": "Format string for matrix names, supporting {variable} and {value} placeholders",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/advanced/#name-formatting"
            }
          },
          "type": "string",
          "default": "{value}"
        },
        "overrides": {
          "title": "Overrides",
          "description": "Overrides depending on things like platform, matrix variables, or environment variables",
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/config/environment/advanced/#option-overrides"
            }
          },
          "type": "object"
        }
      }
    },
    "Envs": {
      "title": "Envs",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/Env"
      }
    },
    "Target": {
      "title": "Target",
      "type": "object",
      "properties": {
        "dependencies": {
          "title": "Dependencies",
          "description": "List of dependencies to install in the environment",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "require-runtime-dependencies": {
          "title": "Require-Runtime-Dependencies",
          "description": "Whether to require runtime dependencies",
          "type": "boolean"
        },
        "require-runtime-features": {
          "title": "Require-Runtime-Features",
          "description": "Whether to require runtime features",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "versions": {
          "title": "Versions",
          "description": "List of versions to build for",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "CustomTargets": {
      "title": "CustomTargets",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/Target"
      }
    },
    "Hook": {
      "title": "Hook",
      "type": "object",
      "properties": {
        "dependencies": {
          "title": "Dependencies",
          "description": "Dependencies installed for the hook environment",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "require-runtime-dependencies": {
          "title": "Require-Runtime-Dependencies",
          "description": "Whether to require runtime dependencies",
          "type": "boolean"
        },
        "require-runtime-features": {
          "title": "Require-Runtime-Features",
          "description": "Whether to require runtime features",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "enable-by-default": {
          "title": "Enable-By-Default",
          "description": "Whether to enable current hook",
          "type": "boolean"
        }
      }
    },
    "Hooks": {
      "title": "Hooks",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/Hook"
      }
    },
    "Build": {
      "title": "Build",
      "type": "object",
      "properties": {
        "ignore-vcs": {
          "title": "Ignore Vcs",
          "description": "Whether to ignore VCS files",
          "type": "boolean"
        },
        "include": {
          "title": "Include",
          "description": "List of files to include",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "exclude": {
          "title": "Exclude",
          "description": "List of files to exclude",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "artifacts": {
          "title": "Artifacts",
          "description": "List of artifacts to include",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "only-packages": {
          "title": "Only-Packages",
          "description": "Whether to only include packages",
          "type": "boolean"
        },
        "skip-excluded-dirs": {
          "title": "Skip-Excluded-Dirs",
          "description": "Whether to skip excluded directories",
          "type": "boolean"
        },
        "reproducible": {
          "title": "Reproducible",
          "description": "Whether to make the build reproducible",
          "type": "boolean"
        },
        "directory": {
          "title": "Directory",
          "description": "Directory to build in",
          "type": "string"
        },
        "dev-mode-dirs": {
          "title": "Dev-Mode-Dirs",
          "description": "List of directories to install in development mode",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "dev-mode-exact": {
          "title": "Dev-Mode-Exact",
          "description": "Whether to install in development mode exactly",
          "type": "boolean"
        },
        "targets": {
          "title": "Targets",
          "description": "Build targets",
          "allOf": [
            {
              "$ref": "#/definitions/CustomTargets"
            }
          ]
        },
        "sources": {
          "title": "Sources",
          "description": "Dictionary of sources",
          "anyOf": [
            {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          ]
        },
        "hooks": {
          "title": "Hooks",
          "description": "Build hooks",
          "allOf": [
            {
              "$ref": "#/definitions/Hooks"
            }
          ]
        }
      }
    },
    "Version": {
      "title": "Version",
      "type": "object",
      "properties": {
        "path": {
          "title": "Path",
          "description": "A relative path to a file containing the project version",
          "type": "string"
        },
        "pattern": {
          "title": "Pattern",
          "description": "A regex pattern to extract the version",
          "type": "string"
        }
      }
    },
    "PublishIndex": {
      "title": "PublishIndex",
      "type": "object",
      "properties": {
        "disable": {
          "title": "Disable",
          "description": "Disable publishing to index",
          "type": "boolean"
        }
      }
    },
    "Publish": {
      "title": "Publish",
      "type": "object",
      "properties": {
        "index": {
          "title": "Index",
          "description": "Publish index",
          "allOf": [
            {
              "$ref": "#/definitions/PublishIndex"
            }
          ]
        }
      }
    }
  },
  "oneOf": [
    {
      "properties": {
        "version": false
      }
    },
    {
      "required": ["version"],
      "properties": {
        "build": {
          "type": "object",
          "properties": {
            "hooks": {
              "type": "object",
              "properties": {
                "vcs": {
                  "type": "object",
                  "x-taplo": {
                    "links": {
                      "key": "https://github.com/ofek/hatch-vcs#build-hook"
                    }
                  },
                  "properties": {
                    "version-file": { "type": "string" }
                  }
                }
              }
            }
          }
        },
        "metadata": {
          "type": "object",
          "properties": {
            "hooks": {
              "type": "object",
              "properties": {
                "vcs": {
                  "type": "object",
                  "x-taplo": {
                    "links": {
                      "key": "https://github.com/ofek/hatch-vcs#metadata-hook"
                    }
                  },
                  "properties": {
                    "urls": {
                      "type": "object",
                      "additionalProperties": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "version": {
          "x-taplo": {
            "links": {
              "key": "https://github.com/ofek/hatch-vcs"
            }
          },
          "type": "object",
          "required": ["source"],
          "properties": {
            "source": {
              "const": "vcs"
            }
          }
        }
      }
    },
    {
      "required": ["version"],
      "properties": {
        "version": {
          "x-taplo": {
            "links": {
              "key": "https://hatch.pypa.io/latest/version/"
            }
          },
          "type": "object",
          "required": ["path"],
          "properties": {
            "path": { "type": "string" },
            "pattern": { "type": "string" }
          }
        }
      }
    }
  ],
  "properties": {
    "metadata": {
      "title": "Metadata",
      "description": "Metadata for the project",
      "allOf": [
        {
          "$ref": "#/definitions/Metadata"
        }
      ]
    },
    "envs": {
      "title": "Envs",
      "description": "Dictionary of environments",
      "x-taplo": {
        "links": {
          "key": "https://hatch.pypa.io/latest/config/environment/overview/"
        }
      },
      "allOf": [
        {
          "$ref": "#/definitions/Envs"
        }
      ]
    },
    "build": {
      "title": "Build",
      "description": "Build configuration",
      "allOf": [
        {
          "$ref": "#/definitions/Build"
        }
      ]
    },
    "version": {
      "title": "Version",
      "description": "Version configuration",
      "allOf": [
        {
          "$ref": "#/definitions/Version"
        }
      ]
    },
    "publish": {
      "title": "Publish",
      "description": "Publish configuration",
      "allOf": [
        {
          "$ref": "#/definitions/Publish"
        }
      ]
    }
  },
  "title": "Hatch",
  "type": "object",
  "x-taplo-info": {
    "authors": [
      "flying-sheep (https://github.com/flying-sheep)",
      "Chaojie (https://github.com/ischaojie)"
    ],
    "pattern": ["^(.*(/|\\\\)hatch\\.toml|hatch\\.toml)$"]
  }
}
