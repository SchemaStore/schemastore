{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://json.schemastore.org/partial-pdm.json",
  "$comment": "PDM table in pyproject.toml",
  "definitions": {
    "pdm-script": {
      "anyOf": [
        {
          "type": "object",

          "properties": {
            "cmd": {
              "anyOf": [
                { "type": "string" },
                {
                  "type": "array",
                  "items": { "type": "string" },
                  "additionalItems": false
                }
              ],
              "description": "Command that can be run from PDM's environment",
              "examples": [
                "flask run -p 54321",
                ["flask", "run", "-p", "54321"]
              ]
            },
            "call": {
              "type": "string",
              "description": "Call to a python callable",
              "examples": [
                "foo_package.bar_module:main",
                "foo_package.bar_module:main('dev')"
              ]
            },
            "shell": {
              "type": "string",
              "description": "Command that will be run in a shell environment",
              "examples": ["cat error.log|grep CRITICAL > critical.log"]
            },
            "composite": {
              "type": "array",
              "items": { "type": "string" },
              "additionalItems": false,
              "description": "List of PDM scripts that should be run with this script",
              "examples": [
                ["lint", "test"],
                ["lint mypackage/", "test -v tests/"]
              ]
            },
            "env": {
              "type": "object",
              "description": "Environment variables applied to the script",
              "additionalProperties": { "type": "string" }
            },
            "env_file": {
              "anyOf": [
                {
                  "type": "string",
                  "description": "Path to a file with env vars. Existing vars will not be overwritten"
                },
                {
                  "type": "object",
                  "properties": {
                    "override": {
                      "type": "string",
                      "description": "Path to a file with env vars. Existing vars will be overwritten"
                    },
                    "additionalProperties": false
                  }
                }
              ]
            }
          },
          "oneOf": [
            { "type": "object", "required": ["cmd"] },
            { "type": "object", "required": ["call"] },
            { "type": "object", "required": ["shell"] },
            { "type": "object", "required": ["composite"] }
          ],
          "additionalProperties": false
        },
        { "type": "string" }
      ],
      "description": "PDM script definition",
      "x-taplo": {
        "links": { "key": "https://pdm-project.org/latest/usage/scripts/" }
      },
      "examples": ["flask run -p 54321"]
    },
    "package-source": {
      "type": "object",
      "description": "Package source",
      "required": ["name", "url"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the package source"
        },
        "url": {
          "type": "string",
          "description": "HTTP url for the package source"
        },
        "verify_ssl": {
          "type": "boolean",
          "description": "Whether to verify certificates when using the package source"
        },
        "username": {
          "type": "string",
          "description": "Username for the package source"
        },
        "password": {
          "type": "string",
          "description": "Password for the package source"
        },
        "type": {
          "type": "string",
          "description": "index or find_links",
          "enum": ["index", "find_links"],
          "default": "index"
        },
        "exclude_packages": {
          "type": "array",
          "items": { "type": "string" },
          "additionalItems": false,
          "description": "Glob patterns of packages that should not be used from this source",
          "examples": [["foo", "foo-*"]],
          "x-taplo": {
            "links": {
              "key": "https://pdm-project.org/latest/usage/config/#specify-index-for-individual-packages"
            }
          }
        },
        "include_packages": {
          "type": "array",
          "items": { "type": "string" },
          "additionalItems": false,
          "description": "Glob patterns of the only packages that should be used from this source",
          "examples": [["foo", "foo-*"]],
          "x-taplo": {
            "links": {
              "key": "https://pdm-project.org/latest/usage/config/#specify-index-for-individual-packages"
            }
          }
        }
      },
      "allOf": [
        {
          "not": {
            "type": "object",
            "required": ["include_packages", "exclude_packages"]
          }
        }
      ],
      "additionalProperties": false,
      "x-taplo": {
        "links": {
          "key": "https://pdm-project.org/latest/usage/config/#configure-the-package-indexes"
        }
      }
    },
    "command-options": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Options that can be applied to a PDM command",
      "examples": [
        ["--no-isolation", "--no-self"],
        ["--no-self"],
        ["--no-cross-platform"]
      ],
      "x-taplo": {
        "links": {
          "key": "https://pdm-project.org/latest/usage/config/#passing-constant-arguments-to-every-pdm-invocation"
        }
      }
    },
    "dev-dependency": {
      "type": "string"
    },
    "dev-dependency-group": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/dev-dependency"
      },
      "examples": [["pytest>=7.4.3", "mypy>=1.7.1"]]
    }
  },
  "properties": {
    "package-type": {
      "type": "string",
      "description": "The kind of project that is built",
      "enum": ["application", "library"],
      "default": "library"
    },
    "allow_prereleases": {
      "type": "boolean",
      "description": "Whether to allow the use of pre-releases when resolving packages",
      "default": false,
      "x-taplo": {
        "links": {
          "key": "https://pdm-project.org/latest/usage/config/#allow-prereleases-in-resolution-result"
        }
      }
    },
    "ignore_package_warnings": {
      "type": "array",
      "description": "Ignore package resolution warnings for packages matching the given patterns (PDM v2.10.0)",
      "items": { "type": "string" },
      "examples": [["scipy", "tensorflow-*"]]
    },
    "dev-dependencies": {
      "type": "object",
      "properties": {
        "dev": {
          "$ref": "#/definitions/dev-dependency-group",
          "description": "The default dev dependencies"
        }
      },
      "additionalProperties": {
        "$ref": "#/definitions/dev-dependency-group"
      },
      "description": "Development dependencies",
      "x-taplo": {
        "links": {
          "key": "https://pdm-project.org/latest/usage/dependency/#add-development-only-dependencies"
        }
      }
    },
    "resolution": {
      "type": "object",
      "description": "Configuration related to package resolution",
      "additionalProperties": false,
      "properties": {
        "respect-source-order": {
          "type": "boolean",
          "description": "Whether PDM prefers package sources by order",
          "default": false,
          "x-taplo": {
            "links": {
              "key": "https://pdm-project.org/latest/usage/config/#respect-the-order-of-the-sources"
            }
          }
        },
        "overrides": {
          "type": "object",

          "description": "Resolution overrides for forcing specific dependency versions",
          "additionalProperties": {
            "type": "string",
            "description": "Dependency version to be used. Can be a version range or an absolute url to a wheel file",
            "examples": [
              "3.2.10",
              ">=1.26.2",
              "https://mypypi.org/packages/pytz-2020.9-py3-none-any.whl"
            ],
            "x-taplo": {
              "links": {
                "key": "https://pdm-project.org/latest/usage/config/#override-the-resolved-package-versions"
              }
            }
          },
          "x-taplo": {
            "links": {
              "key": "https://pdm-project.org/latest/usage/config/#override-the-resolved-package-versions"
            }
          }
        }
      }
    },
    "options": {
      "type": "object",
      "description": "Default options applied to a PDM command",
      "examples": [
        {
          "add": ["--no-isolation", "--no-self"],
          "install": ["--no-self"],
          "lock": ["--no-cross-platform"]
        }
      ],
      "properties": {
        "add": {
          "$ref": "#/definitions/command-options"
        },
        "build": {
          "$ref": "#/definitions/command-options"
        },
        "cache": {
          "$ref": "#/definitions/command-options"
        },
        "completion": {
          "$ref": "#/definitions/command-options"
        },
        "config": {
          "$ref": "#/definitions/command-options"
        },
        "export": {
          "$ref": "#/definitions/command-options"
        },
        "fix": {
          "$ref": "#/definitions/command-options"
        },
        "import": {
          "$ref": "#/definitions/command-options"
        },
        "info": {
          "$ref": "#/definitions/command-options"
        },
        "init": {
          "$ref": "#/definitions/command-options"
        },
        "install": {
          "$ref": "#/definitions/command-options"
        },
        "list": {
          "$ref": "#/definitions/command-options"
        },
        "lock": {
          "$ref": "#/definitions/command-options"
        },
        "publish": {
          "$ref": "#/definitions/command-options"
        },
        "remove": {
          "$ref": "#/definitions/command-options"
        },
        "run": {
          "$ref": "#/definitions/command-options"
        },
        "search": {
          "$ref": "#/definitions/command-options"
        },
        "self": {
          "$ref": "#/definitions/command-options"
        },
        "show": {
          "$ref": "#/definitions/command-options"
        },
        "sync": {
          "$ref": "#/definitions/command-options"
        },
        "update": {
          "$ref": "#/definitions/command-options"
        },
        "use": {
          "$ref": "#/definitions/command-options"
        },
        "venv": {
          "$ref": "#/definitions/command-options"
        }
      },
      "additionalProperties": {
        "$ref": "#/definitions/command-options"
      },
      "x-taplo": {
        "links": {
          "key": "https://pdm-project.org/latest/usage/config/#passing-constant-arguments-to-every-pdm-invocation"
        }
      }
    },
    "source": {
      "type": "array",
      "description": "Sources used for package resolution",
      "items": {
        "$ref": "#/definitions/package-source"
      },
      "x-taplo": {
        "links": {
          "key": "https://pdm-project.org/latest/usage/config/#configure-the-package-indexes"
        }
      },
      "additionalItems": false
    },
    "scripts": {
      "type": "object",
      "description": "Definition of PDM scripts",

      "properties": {
        "_": {
          "$ref": "#/definitions/pdm-script",
          "description": "Shared options for all scripts\nhttps://pdm-project.org/latest/usage/scripts/#shared-options"
        },
        "post_init": { "$ref": "#/definitions/pdm-script" },
        "pre_install": { "$ref": "#/definitions/pdm-script" },
        "post_install": { "$ref": "#/definitions/pdm-script" },
        "pre_lock": { "$ref": "#/definitions/pdm-script" },
        "post_lock": { "$ref": "#/definitions/pdm-script" },
        "pre_build": { "$ref": "#/definitions/pdm-script" },
        "post_build": { "$ref": "#/definitions/pdm-script" },
        "pre_publish": { "$ref": "#/definitions/pdm-script" },
        "post_publish": { "$ref": "#/definitions/pdm-script" },
        "pre_script": { "$ref": "#/definitions/pdm-script" },
        "post_script": { "$ref": "#/definitions/pdm-script" },
        "pre_run": { "$ref": "#/definitions/pdm-script" },
        "post_run": { "$ref": "#/definitions/pdm-script" }
      },
      "additionalProperties": {
        "$ref": "#/definitions/pdm-script"
      },
      "x-taplo": {
        "links": {
          "key": "https://pdm-project.org/latest/usage/scripts/"
        }
      }
    },
    "version": {
      "type": "object",
      "description": "Dynamic version options for PDM-backend",
      "properties": {},
      "additionalProperties": false,
      "x-taplo": {
        "links": {
          "key": "https://backend.pdm-project.org/metadata/#dynamic-project-version"
        }
      }
    }
  },
  "type": "object",
  "additionalProperties": false
}
