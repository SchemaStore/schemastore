{
  "dsl_definitions": {
    "azure_config": {
      "client_id": {
        "get_input": "client_id"
      },
      "client_secret": {
        "get_input": "client_secret"
      },
      "subscription_id": {
        "get_input": "subscription_id"
      },
      "tenant_id": {
        "get_input": "tenant_id"
      }
    }
  },
  "imports": [
    "http://www.getcloudify.org/spec/cloudify/3.4/types.yaml",
    "https://raw.githubusercontent.com/cloudify-cosmo/cloudify-azure-plugin/master/plugin.yaml"
  ],
  "inputs": {
    "authorized_keys_centos": {
      "default": {
        "concat": [
          "/home/",
          {
            "get_input": "username_centos_final"
          },
          "/.ssh/authorized_keys"
        ]
      },
      "description": "Where on the machine that the public keys go. (Usually ~/.ssh/authorized_keys.)\n"
    },
    "authorized_keys_ubuntu": {
      "default": {
        "concat": [
          "/home/",
          {
            "get_input": "username_ubuntu_trusty"
          },
          "/.ssh/authorized_keys"
        ]
      },
      "description": "Where on the machine that the public keys go. (Usually ~/.ssh/authorized_keys.)\n"
    },
    "client_id": {
      "required": true,
      "type": "string"
    },
    "client_secret": {
      "required": true,
      "type": "string"
    },
    "image_offer_centos_final": {
      "default": "CentOS"
    },
    "image_offer_ubuntu_trusty": {
      "default": "UbuntuServer"
    },
    "image_offer_windows": {
      "default": "WindowsServer"
    },
    "image_publisher_centos_final": {
      "default": "OpenLogic"
    },
    "image_publisher_ubuntu_trusty": {
      "default": "Canonical"
    },
    "image_publisher_windows": {
      "default": "MicrosoftWindowsServer"
    },
    "image_sku_centos_final": {
      "default": "7.0"
    },
    "image_sku_ubuntu_trusty": {
      "default": "14.04.4-LTS"
    },
    "image_sku_windows": {
      "default": "2012-R2-Datacenter"
    },
    "image_version_centos_final": {
      "default": "latest"
    },
    "image_version_ubuntu_trusty": {
      "default": "latest"
    },
    "image_version_windows": {
      "default": "latest"
    },
    "keydata": {
      "description": "The public key string that will go in the VM's authorized_keys file.\n"
    },
    "loadbalancer_port": {
      "default": 80,
      "description": "The external Azure Load Balancer port"
    },
    "location": {
      "default": "westus",
      "description": "System tests are run in westus.\n"
    },
    "os_family_linux": {
      "default": "linux"
    },
    "os_family_windows": {
      "default": "windows"
    },
    "password": {
      "default": "Cl0ud1fy!",
      "description": "Azure requires that your VMs have passwords.\n"
    },
    "public_key_auth_only": {
      "default": true,
      "description": "Whether to use key only authentication."
    },
    "resource_prefix": {
      "description": "In these tests, this will be the test id.\n"
    },
    "retry_after": {
      "default": 30,
      "description": "The interval between retries from the client to the API.\n"
    },
    "standard_a2_size": {
      "default": "Standard_A2",
      "description": "The size all of the test VMs should be.\n"
    },
    "subnet_private_cidr": {
      "default": "10.10.0.0/16",
      "required": true,
      "type": "string"
    },
    "subscription_id": {
      "required": true,
      "type": "string"
    },
    "tenant_id": {
      "required": true,
      "type": "string"
    },
    "username_centos_final": {
      "default": "centos"
    },
    "username_ubuntu_trusty": {
      "default": "ubuntu"
    },
    "username_windows": {
      "default": "Cloudify"
    },
    "webserver_port": {
      "default": 8080
    }
  },
  "node_templates": {
    "availabilityset": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.compute.AvailabilitySet"
    },
    "centosdatadisk": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "force_delete": true,
          "size": 1
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "storageaccount",
          "type": "cloudify.azure.relationships.contained_in_storage_account"
        }
      ],
      "type": "cloudify.azure.nodes.storage.DataDisk"
    },
    "centoshost": {
      "properties": {
        "agent_config": {
          "install_method": "none"
        },
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "os_family": {
          "get_input": "os_family_linux"
        },
        "resource_config": {
          "hardwareProfile": {
            "vmSize": {
              "get_input": "standard_a2_size"
            }
          },
          "osProfile": {
            "adminPassword": {
              "get_input": "password"
            },
            "adminUsername": {
              "get_input": "username_centos_final"
            },
            "linuxConfiguration": {
              "disablePasswordAuthentication": {
                "get_input": "public_key_auth_only"
              },
              "ssh": {
                "publicKeys": [
                  {
                    "keyData": {
                      "get_input": "keydata"
                    },
                    "path": {
                      "get_input": "authorized_keys_centos"
                    }
                  }
                ]
              }
            }
          },
          "storageProfile": {
            "imageReference": {
              "offer": {
                "get_input": "image_offer_centos_final"
              },
              "publisher": {
                "get_input": "image_publisher_centos_final"
              },
              "sku": {
                "get_input": "image_sku_centos_final"
              },
              "version": {
                "get_input": "image_version_centos_final"
              }
            }
          }
        },
        "retry_after": {
          "get_input": "retry_after"
        },
        "use_public_ip": false
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "storageaccount",
          "type": "cloudify.azure.relationships.connected_to_storage_account"
        },
        {
          "target": "centosnic",
          "type": "cloudify.azure.relationships.connected_to_nic"
        },
        {
          "source_interfaces": {
            "cloudify.interfaces.relationship_lifecycle": {
              "establish": {
                "implementation": "azure.cloudify_azure.resources.compute.virtualmachine.attach_data_disk",
                "inputs": {
                  "lun": 0
                }
              }
            }
          },
          "target": "centosdatadisk",
          "type": "cloudify.azure.relationships.vm_connected_to_datadisk"
        }
      ],
      "type": "cloudify.azure.nodes.compute.VirtualMachine"
    },
    "centosipconfig": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "privateIPAllocationMethod": "Dynamic"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "subnet",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_subnet"
        },
        {
          "target": "centospublicip",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_public_ip"
        }
      ],
      "type": "cloudify.azure.nodes.network.IPConfiguration"
    },
    "centosnic": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "networksecuritygroup",
          "type": "cloudify.azure.relationships.nic_connected_to_network_security_group"
        },
        {
          "target": "centosipconfig",
          "type": "cloudify.azure.relationships.nic_connected_to_ip_configuration"
        }
      ],
      "type": "cloudify.azure.nodes.network.NetworkInterfaceCard"
    },
    "centospublicip": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "publicIPAllocationMethod": "Static"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.network.PublicIPAddress"
    },
    "fileshare": {
      "properties": {
        "resource_config": {
          "quota": 5
        }
      },
      "relationships": [
        {
          "target": "storageaccount",
          "type": "cloudify.azure.relationships.contained_in_storage_account"
        }
      ],
      "type": "cloudify.azure.nodes.storage.FileShare"
    },
    "hostroute": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "addressPrefix": {
            "get_input": "subnet_private_cidr"
          },
          "nextHopType": "VnetLocal"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "routetable",
          "type": "cloudify.azure.relationships.contained_in_route_table"
        },
        {
          "target": "internetroute",
          "type": "cloudify.relationships.depends_on"
        }
      ],
      "type": "cloudify.azure.nodes.network.Route"
    },
    "internetroute": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "addressPrefix": "0.0.0.0/0",
          "nextHopType": "Internet"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "routetable",
          "type": "cloudify.azure.relationships.contained_in_route_table"
        }
      ],
      "type": "cloudify.azure.nodes.network.Route"
    },
    "loadbalancer": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "loadbalanceripcfg",
          "type": "cloudify.azure.relationships.lb_connected_to_ip_configuration"
        }
      ],
      "type": "cloudify.azure.nodes.network.LoadBalancer"
    },
    "loadbalancerbackendpool": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "loadbalancer",
          "type": "cloudify.azure.relationships.contained_in_load_balancer"
        }
      ],
      "type": "cloudify.azure.nodes.network.LoadBalancer.BackendAddressPool"
    },
    "loadbalanceripcfg": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "privateIPAllocationMethod": "Dynamic"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "subnet",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_subnet"
        },
        {
          "target": "loadbalancerpublicip",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_public_ip"
        }
      ],
      "type": "cloudify.azure.nodes.network.IPConfiguration"
    },
    "loadbalancerprobe": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "name": "lbprobe",
        "resource_config": {
          "port": {
            "get_input": "webserver_port"
          },
          "protocol": "Http",
          "requestPath": "index.html"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "loadbalancer",
          "type": "cloudify.azure.relationships.contained_in_load_balancer"
        },
        {
          "target": "loadbalancerbackendpool",
          "type": "cloudify.relationships.depends_on"
        }
      ],
      "type": "cloudify.azure.nodes.network.LoadBalancer.Probe"
    },
    "loadbalancerpublicip": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "publicIPAllocationMethod": "Static"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.network.PublicIPAddress"
    },
    "loadbalancerrule": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "backendPort": {
            "get_input": "webserver_port"
          },
          "frontendPort": {
            "get_input": "loadbalancer_port"
          },
          "protocol": "Tcp"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "loadbalancer",
          "type": "cloudify.azure.relationships.contained_in_load_balancer"
        },
        {
          "target": "loadbalanceripcfg",
          "type": "cloudify.azure.relationships.connected_to_ip_configuration"
        },
        {
          "target": "loadbalancerbackendpool",
          "type": "cloudify.azure.relationships.connected_to_lb_be_pool"
        },
        {
          "target": "loadbalancerprobe",
          "type": "cloudify.azure.relationships.connected_to_lb_probe"
        }
      ],
      "type": "cloudify.azure.nodes.network.LoadBalancer.Rule"
    },
    "networksecuritygroup": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "securityRules": [
            {
              "name": "nsr_ssh",
              "properties": {
                "access": "Allow",
                "description": "SSH access",
                "destinationAddressPrefix": "*",
                "destinationPortRange": 22,
                "direction": "Inbound",
                "priority": 100,
                "protocol": "Tcp",
                "sourceAddressPrefix": "*",
                "sourcePortRange": "*"
              }
            },
            {
              "name": "nsr_rdp",
              "properties": {
                "access": "Allow",
                "description": "RDP access",
                "destinationAddressPrefix": "*",
                "destinationPortRange": 3389,
                "direction": "Inbound",
                "priority": 101,
                "protocol": "Tcp",
                "sourceAddressPrefix": "*",
                "sourcePortRange": "*"
              }
            },
            {
              "name": "nsr_webapp",
              "properties": {
                "access": "Allow",
                "description": "Webapp access",
                "destinationAddressPrefix": "*",
                "destinationPortRange": {
                  "get_input": "webserver_port"
                },
                "direction": "Inbound",
                "priority": 200,
                "protocol": "Tcp",
                "sourceAddressPrefix": "*",
                "sourcePortRange": "*"
              }
            }
          ]
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.network.NetworkSecurityGroup"
    },
    "resourcegroup": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "name": {
          "concat": [
            {
              "get_input": "resource_prefix"
            },
            "rg"
          ]
        }
      },
      "type": "cloudify.azure.nodes.ResourceGroup"
    },
    "routetable": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "subnet",
          "type": "cloudify.azure.relationships.route_table_attached_to_subnet"
        }
      ],
      "type": "cloudify.azure.nodes.network.RouteTable"
    },
    "storageaccount": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "accountType": "Standard_LRS"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.storage.StorageAccount"
    },
    "subnet": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "addressPrefix": {
            "get_input": "subnet_private_cidr"
          }
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "virtualnetwork",
          "type": "cloudify.azure.relationships.contained_in_virtual_network"
        }
      ],
      "type": "cloudify.azure.nodes.network.Subnet"
    },
    "ubuntuhost": {
      "properties": {
        "agent_config": {
          "install_method": "none"
        },
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "os_family": {
          "get_input": "os_family_linux"
        },
        "resource_config": {
          "hardwareProfile": {
            "vmSize": {
              "get_input": "standard_a2_size"
            }
          },
          "osProfile": {
            "adminPassword": {
              "get_input": "password"
            },
            "adminUsername": {
              "get_input": "username_ubuntu_trusty"
            },
            "linuxConfiguration": {
              "disablePasswordAuthentication": {
                "get_input": "public_key_auth_only"
              },
              "ssh": {
                "publicKeys": [
                  {
                    "keyData": {
                      "get_input": "keydata"
                    },
                    "path": {
                      "get_input": "authorized_keys_ubuntu"
                    }
                  }
                ]
              }
            }
          },
          "storageProfile": {
            "imageReference": {
              "offer": {
                "get_input": "image_offer_ubuntu_trusty"
              },
              "publisher": {
                "get_input": "image_publisher_ubuntu_trusty"
              },
              "sku": {
                "get_input": "image_sku_ubuntu_trusty"
              },
              "version": {
                "get_input": "image_version_ubuntu_trusty"
              }
            }
          }
        },
        "retry_after": {
          "get_input": "retry_after"
        },
        "use_public_ip": false
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "storageaccount",
          "type": "cloudify.azure.relationships.connected_to_storage_account"
        },
        {
          "target": "ubuntunic",
          "type": "cloudify.azure.relationships.connected_to_nic"
        }
      ],
      "type": "cloudify.azure.nodes.compute.VirtualMachine"
    },
    "ubuntuipconfig": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "privateIPAllocationMethod": "Dynamic"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "subnet",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_subnet"
        },
        {
          "target": "ubuntupublicip",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_public_ip"
        }
      ],
      "type": "cloudify.azure.nodes.network.IPConfiguration"
    },
    "ubuntunic": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "networksecuritygroup",
          "type": "cloudify.azure.relationships.nic_connected_to_network_security_group"
        },
        {
          "target": "ubuntuipconfig",
          "type": "cloudify.azure.relationships.nic_connected_to_ip_configuration"
        }
      ],
      "type": "cloudify.azure.nodes.network.NetworkInterfaceCard"
    },
    "ubuntupublicip": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "publicIPAllocationMethod": "Static"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.network.PublicIPAddress"
    },
    "virtualnetwork": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.network.VirtualNetwork"
    },
    "windowsvm1": {
      "properties": {
        "agent_config": {
          "install_method": "none",
          "password": {
            "get_input": "password"
          },
          "user": {
            "get_input": "username_windows"
          }
        },
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "os_family": {
          "get_input": "os_family_windows"
        },
        "resource_config": {
          "hardwareProfile": {
            "vmSize": {
              "get_input": "standard_a2_size"
            }
          },
          "osProfile": {
            "adminPassword": {
              "get_input": "password"
            },
            "adminUsername": {
              "get_input": "username_windows"
            }
          },
          "storageProfile": {
            "dataDisks": [
              {
                "diskSizeGB": 2
              }
            ],
            "imageReference": {
              "offer": {
                "get_input": "image_offer_windows"
              },
              "publisher": {
                "get_input": "image_publisher_windows"
              },
              "sku": {
                "get_input": "image_sku_windows"
              },
              "version": {
                "get_input": "image_version_windows"
              }
            }
          }
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "storageaccount",
          "type": "cloudify.azure.relationships.connected_to_storage_account"
        },
        {
          "target": "availabilityset",
          "type": "cloudify.azure.relationships.connected_to_availability_set"
        },
        {
          "target": "windowsvm1nic",
          "type": "cloudify.azure.relationships.connected_to_nic"
        }
      ],
      "type": "cloudify.azure.nodes.compute.VirtualMachine"
    },
    "windowsvm1nic": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "networksecuritygroup",
          "type": "cloudify.azure.relationships.nic_connected_to_network_security_group"
        },
        {
          "target": "windowsvm1nicipcfg",
          "type": "cloudify.azure.relationships.nic_connected_to_ip_configuration"
        },
        {
          "target": "loadbalancerbackendpool",
          "type": "cloudify.azure.relationships.nic_connected_to_lb_be_pool"
        }
      ],
      "type": "cloudify.azure.nodes.network.NetworkInterfaceCard"
    },
    "windowsvm1nicipcfg": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "privateIPAllocationMethod": "Dynamic"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "subnet",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_subnet"
        },
        {
          "target": "windowsvm1publicip",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_public_ip"
        }
      ],
      "type": "cloudify.azure.nodes.network.IPConfiguration"
    },
    "windowsvm1publicip": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "publicIPAllocationMethod": "Static"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.network.PublicIPAddress"
    },
    "windowsvm2": {
      "properties": {
        "agent_config": {
          "install_method": "none",
          "password": {
            "get_input": "password"
          },
          "user": {
            "get_input": "username_windows"
          }
        },
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "os_family": {
          "get_input": "os_family_windows"
        },
        "resource_config": {
          "hardwareProfile": {
            "vmSize": {
              "get_input": "standard_a2_size"
            }
          },
          "osProfile": {
            "adminPassword": {
              "get_input": "password"
            },
            "adminUsername": {
              "get_input": "username_windows"
            }
          },
          "storageProfile": {
            "dataDisks": [
              {
                "diskSizeGB": 2
              }
            ],
            "imageReference": {
              "offer": {
                "get_input": "image_offer_windows"
              },
              "publisher": {
                "get_input": "image_publisher_windows"
              },
              "sku": {
                "get_input": "image_sku_windows"
              },
              "version": {
                "get_input": "image_version_windows"
              }
            }
          }
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "storageaccount",
          "type": "cloudify.azure.relationships.connected_to_storage_account"
        },
        {
          "target": "availabilityset",
          "type": "cloudify.azure.relationships.connected_to_availability_set"
        },
        {
          "target": "windowsvm2nic",
          "type": "cloudify.azure.relationships.connected_to_nic"
        }
      ],
      "type": "cloudify.azure.nodes.compute.VirtualMachine"
    },
    "windowsvm2nic": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "networksecuritygroup",
          "type": "cloudify.azure.relationships.nic_connected_to_network_security_group"
        },
        {
          "target": "windowsvm2nicipcfg",
          "type": "cloudify.azure.relationships.nic_connected_to_ip_configuration"
        },
        {
          "target": "loadbalancerbackendpool",
          "type": "cloudify.azure.relationships.nic_connected_to_lb_be_pool"
        }
      ],
      "type": "cloudify.azure.nodes.network.NetworkInterfaceCard"
    },
    "windowsvm2nicipcfg": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "privateIPAllocationMethod": "Dynamic"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        },
        {
          "target": "subnet",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_subnet"
        },
        {
          "target": "windowsvm2publicip",
          "type": "cloudify.azure.relationships.ip_configuration_connected_to_public_ip"
        }
      ],
      "type": "cloudify.azure.nodes.network.IPConfiguration"
    },
    "windowsvm2publicip": {
      "properties": {
        "azure_config": {
          "client_id": {
            "get_input": "client_id"
          },
          "client_secret": {
            "get_input": "client_secret"
          },
          "subscription_id": {
            "get_input": "subscription_id"
          },
          "tenant_id": {
            "get_input": "tenant_id"
          }
        },
        "location": {
          "get_input": "location"
        },
        "resource_config": {
          "publicIPAllocationMethod": "Static"
        },
        "retry_after": {
          "get_input": "retry_after"
        }
      },
      "relationships": [
        {
          "target": "resourcegroup",
          "type": "cloudify.azure.relationships.contained_in_resource_group"
        }
      ],
      "type": "cloudify.azure.nodes.network.PublicIPAddress"
    }
  },
  "tosca_definitions_version": "cloudify_dsl_1_3"
}
