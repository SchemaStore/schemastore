# via https://buf.build/docs/configuration/v2/buf-yaml
version: v2
modules:
  # Basic configuration: local directory with corresponding BSR repository.
  - path: proto/foo
    name: buf.build/acme/foo
  # Local directory & repository, but excluding a directory and a specific .proto file.
  # Note that the paths for exclusion are relative to the buf.yaml file.
  - path: proto/bar
    name: buf.build/acme/bar
    excludes:
      - proto/bar/a
      - proto/bar/b/c.proto
    # Lint configuration for this module only. This rule set completely replaces the workspace defaults.
    lint:
      use:
        - DEFAULT
      except:
        - IMPORT_USED
      ignore:
        - proto/bar/b/c.proto
      ignore_only:
        ENUM_ZERO_VALUE_SUFFIX:
          - proto/bar/d
          - proto/bar/e/f.proto
      disallow_comment_ignores: false # The default behavior of this key has changed from v1
      enum_zero_value_suffix: _UNSPECIFIED
      rpc_allow_same_request_response: false
      rpc_allow_google_protobuf_empty_requests: false
      rpc_allow_google_protobuf_empty_responses: false
      service_suffix: Service
    # Breaking changes configuration for this module only. This rule set completely replaces the workspace defaults.
    breaking:
      use:
        - FILE
      except:
        - EXTENSION_MESSAGE_NO_DELETE
      ignore:
        - proto/bar/a
        - proto/bar/b/c.proto
      ignore_only:
        ENUM_ZERO_VALUE_SUFFIX:
          - proto/bar/d
          - proto/bar/e/f.proto
      ignore_unstable_packages: true
# Module dependencies available to all modules in the workspace. Modules within the workspace
# shouldn't be listed here. The resolution of these dependencies is stored in the buf.lock file.
deps:
  - buf.build/google/googleapis
  - buf.build/grpc/grpc
# Default lint configuration for all modules in the workspace.
lint:
  use:
    - DEFAULT
# Default breaking changes configuration for all modules in the workspace.
breaking:
  use:
    - FILE
