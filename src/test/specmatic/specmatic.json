{
  "version": "VERSION_2",
  "contracts": [
    {
      "git": {
        "url": "https://github.com/example/contracts",
        "branch": "main"
      },
      "provides": [
        "src/test/petstore.yaml",
        {
          "specs": ["src/test/orders.yaml"],
          "host": "localhost",
          "port": 8080,
          "resiliencyTests": {
            "enable": "all"
          }
        }
      ],
      "consumes": [
        "src/test/petstore.yaml",
        {
          "specs": ["src/test/payments.yaml"],
          "baseUrl": "https://api.example.com",
          "host": "api.example.com",
          "port": 443,
          "basePath": "/v1"
        }
      ]
    },
    {
      "filesystem": {
        "directory": "./contracts"
      },
      "provides": ["./contracts/users.yaml"],
      "consumes": ["./contracts/notifications.yaml"]
    }
  ],
  "additionalExampleParamsFilePath": "./additional-params.json",
  "allPatternsMandatory": false,
  "attributeSelectionPattern": {
    "default_fields": ["id", "name", "status"],
    "query_param_key": "fields"
  },
  "auth": {
    "bearer-environment-variable": "AUTH_TOKEN",
    "bearer-file": "./token.txt"
  },
  "defaultPatternValues": {
    "environment": "development",
    "version": "v1"
  },
  "environments": {
    "development": {
      "baseurls": {
        "api": "https://dev-api.example.com",
        "auth": "https://dev-auth.example.com"
      },
      "variables": {
        "debug": "true",
        "log_level": "debug"
      }
    },
    "production": {
      "baseurls": {
        "api": "https://api.example.com",
        "auth": "https://auth.example.com"
      },
      "variables": {
        "debug": "false",
        "log_level": "info"
      }
    }
  },
  "examples": [
    "./examples/user-examples.json",
    "./examples/product-examples.json"
  ],
  "hooks": {
    "post-test": "npm run cleanup",
    "pre-test": "npm run setup"
  },
  "ignoreInlineExamples": false,
  "pipeline": {
    "definitionId": 123,
    "organization": "myorg",
    "project": "myproject",
    "provider": "azure"
  },
  "report": {
    "formatters": [
      {
        "heading": "Contract Test Results",
        "layout": "table",
        "lite": false,
        "logo": "./logo.png",
        "logoAltText": "Company Logo",
        "outputDirectory": "./reports",
        "title": "API Test Report",
        "type": "html"
      },
      {
        "outputDirectory": "./reports",
        "type": "ctrf"
      }
    ],
    "types": {
      "APICoverage": {
        "OpenAPI": {
          "excludedEndpoints": ["/health", "/metrics"],
          "successCriteria": {
            "enforce": true,
            "maxMissedEndpointsInSpec": 5,
            "minThresholdPercentage": 80
          }
        }
      }
    }
  },
  "repository": {
    "collectionName": "api-contracts",
    "provider": "github"
  },
  "security": {
    "OpenAPI": {
      "securitySchemes": {
        "apiKey": {
          "type": "apiKey",
          "value": "${API_KEY}"
        },
        "bearerAuth": {
          "token": "${AUTH_TOKEN}",
          "type": "bearer"
        }
      }
    }
  },
  "stub": {
    "delayInMilliseconds": 100,
    "dictionary": "./stub-dictionary.json",
    "generative": true,
    "hotReload": "enabled",
    "includeMandatoryAndRequestedKeysInResponse": true,
    "startTimeoutInMilliseconds": 10000
  },
  "test": {
    "allowExtensibleSchema": false,
    "resiliencyTests": {
      "enable": "all"
    },
    "timeoutInMilliseconds": 30000,
    "validateResponseValues": true
  },
  "virtualService": {
    "nonPatchableKeys": ["id", "createdAt", "updatedAt"]
  },
  "workflow": {
    "ids": {
      "orderId": {
        "extract": "$.order.id",
        "use": "$.request.orderId"
      },
      "userId": {
        "extract": "$.user.id",
        "use": "$.request.userId"
      }
    }
  }
}
