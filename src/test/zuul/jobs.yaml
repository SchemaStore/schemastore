# yaml-language-server: $schema=../../schemas/json/zuul.json
# valid zuul config sample
- job:
    name: minimal

- job:
    name: b
    description: ...
    pre-run: ...
    run: ...
    dependencies:
      - hard
    files:
      - foo
      - bar

- job:
    name: maximal
    abstract: true
    attempts: 1
    voting: true
    ansible-version: 2.8
    host-vars:
      primary:
        ansible_user: root
    timeout: 3400
    description: ...
    run: ...
    dependencies:
      - name: hard
      - name: soft
        soft: true
    nodeset:
      nodes: []
    pre-run:
      - foo
      - bar
    post-run:
      - foo
      - bar
    parent: ...
    vars:
      foo: bar
    files: 'pattern' # or list of patterns
    override-checkout: master
    success-url: docs/
    failure-url: docs/
    secrets: # https://zuul-ci.org/docs/zuul/reference/job_def.html#attr-job.secrets
      - foo
      - name: bar
        secret: pass
        pass-to-parent: true
    tags: all-platforms
    required-projects:
      - foo
      - bar
      - name: foo
        override-checkout: branch-name
    requires:
      - vegetables
    provides:
      - salad
      - food
    roles:
      - zuul: some_role_name
    final: false
    branches: master
    semaphores:
      - name: foo
        resources-first: true

- job:
    name: c
    description: ...
    pre-run: ...
    run: ...
    workspace-scheme: golang
    dependencies:
      - hard
    files:
      - foo
      - bar

- job:
    name: d
    description: ...
    pre-run: ...
    run: ...
    workspace-scheme: flat
    dependencies:
      - hard
    files:
      - foo
      - bar

- job:
    name: e
    description: ...
    pre-run: ...
    run: ...
    workspace-scheme: unique
    dependencies:
      - hard
    files:
      - foo
      - bar

- job:
    name: f
    description: ...
    semaphores:
      - foo
      - bar

- job:
    name: g
    description: ...
    semaphores: foo

- job:
    name: h
    description: ...
    semaphores:
      name: foo
      resources-first: false

- job:
    name: i
    description: ...
    semaphores:
      name: foo

- project-template:
    name: sample-template
    description: Description
    queue: test
    vars:
      var_from_template: foo
    post:
      jobs:
        - template_job
    release:
      jobs:
        - template_job

# project minimal
- project: {}

# project maximal
- project:
    name: Sample project
    queue: test
    default-branch: main
    description: Description
    templates:
      - sample-template
    vars:
      var_for_all_jobs: value
    # common pipeline names (sadly at same level as properties)
    check:
      fail-fast: true
      jobs:
        - job1
        - job2:
            vars:
              var_for_all_jobs: override
    gate: {}
    promote: {}
    periodic-weekly: {}

# https://zuul-ci.org/docs/zuul/reference/secret_def.html#secret
- secret:
    name: foo
    data:
      foo: bar
